{"version":3,"sources":["../src/index.tsx","../src/components/Button.tsx","../src/components/Card.tsx","../src/components/Input.tsx","../src/components/Badge.tsx","../src/wallet-sdk/utils/SignerFactory.ts","../src/wallet-sdk/core/WalletManager.ts","../src/wallet-sdk/components/WalletProvider.tsx","../src/wallet-sdk/utils/WalletDeduplicator.ts","../src/wallet-sdk/components/WalletModal.tsx","../src/wallet-sdk/components/ConnectButton.tsx","../src/wallet-sdk/components/AccountDropdown.tsx","../src/wallet-sdk/components/EnhancedConnectButton.tsx","../src/wallet-sdk/index.ts"],"sourcesContent":["// å¯¼å‡ºæ‰€æœ‰ç»„ä»¶\nexport * from './components/Button';\nexport * from './components/Card';\nexport * from './components/Input';\nexport * from './components/Badge';\n\n// å¯¼å‡ºé’±åŒ… SDK\nexport * from './wallet-sdk';","import React from 'react';\n\nexport interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  /**\n   * æŒ‰é’®å˜ä½“\n   */\n  variant?: 'primary' | 'secondary' | 'outline' | 'ghost';\n  /**\n   * æŒ‰é’®å¤§å°\n   */\n  size?: 'sm' | 'md' | 'lg';\n  /**\n   * æ˜¯å¦ä¸ºå…¨å®½æŒ‰é’®\n   */\n  fullWidth?: boolean;\n  /**\n   * æ˜¯å¦ç¦ç”¨\n   */\n  disabled?: boolean;\n  /**\n   * åŠ è½½çŠ¶æ€\n   */\n  loading?: boolean;\n}\n\nexport const Button: React.FC<ButtonProps> = ({\n  children,\n  className = '',\n  variant = 'primary',\n  size = 'md',\n  fullWidth = false,\n  disabled = false,\n  loading = false,\n  ...props\n}) => {\n  // Tailwind ç±»åæ˜ å°„\n  const variantClasses = {\n    primary: 'bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500',\n    secondary: 'bg-secondary-200 text-secondary-900 hover:bg-secondary-300 focus:ring-secondary-300',\n    outline: 'bg-transparent border border-primary-600 text-primary-600 hover:bg-primary-50 focus:ring-primary-500',\n    ghost: 'bg-transparent text-primary-600 hover:bg-primary-50 focus:ring-primary-500',\n  };\n\n  const sizeClasses = {\n    sm: 'py-1 px-3 text-sm',\n    md: 'py-2 px-4 text-base',\n    lg: 'py-3 px-6 text-lg',\n  };\n\n  const baseClasses = 'font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors';\n  const widthClass = fullWidth ? 'w-full' : '';\n  const disabledClass = disabled ? 'opacity-50 cursor-not-allowed' : '';\n  \n  return (\n    <button\n      className={`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${widthClass} ${disabledClass} ${className}`}\n      disabled={disabled || loading}\n      {...props}\n    >\n      {loading ? (\n        <div className=\"flex items-center justify-center\">\n          <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-current\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n          </svg>\n          {children}\n        </div>\n      ) : (\n        children\n      )}\n    </button>\n  );\n};","import React from 'react';\n\nexport interface CardProps {\n  /**\n   * å¡ç‰‡æ ‡é¢˜\n   */\n  title?: string;\n  /**\n   * å¡ç‰‡å†…å®¹\n   */\n  children: React.ReactNode;\n  /**\n   * å¡ç‰‡åº•éƒ¨å†…å®¹\n   */\n  footer?: React.ReactNode;\n  /**\n   * æ˜¯å¦æœ‰é˜´å½±\n   */\n  shadow?: 'none' | 'sm' | 'md' | 'lg';\n  /**\n   * è‡ªå®šä¹‰ç±»å\n   */\n  className?: string;\n}\n\nexport const Card: React.FC<CardProps> = ({\n  title,\n  children,\n  footer,\n  shadow = 'md',\n  className = '',\n}) => {\n  const shadowClasses = {\n    none: '',\n    sm: 'shadow-sm',\n    md: 'shadow',\n    lg: 'shadow-lg',\n  };\n\n  return (\n    <div className={`bg-white rounded-lg border border-secondary-200 overflow-hidden ${shadowClasses[shadow]} ${className}`}>\n      {title && (\n        <div className=\"px-6 py-4 border-b border-secondary-200\">\n          <h3 className=\"text-lg font-medium text-secondary-900\">{title}</h3>\n        </div>\n      )}\n      <div className=\"px-6 py-4\">{children}</div>\n      {footer && (\n        <div className=\"px-6 py-4 bg-secondary-50 border-t border-secondary-200\">\n          {footer}\n        </div>\n      )}\n    </div>\n  );\n};","import React from \"react\";\n\nexport interface InputProps\n  extends Omit<\n    React.InputHTMLAttributes<HTMLInputElement>,\n    \"size\" | \"prefix\" | \"suffix\"\n  > {\n  /**\n   * è¾“å…¥æ¡†æ ‡ç­¾\n   */\n  label?: string;\n  /**\n   * å¸®åŠ©æ–‡æœ¬\n   */\n  helpText?: string;\n  /**\n   * é”™è¯¯ä¿¡æ¯\n   */\n  error?: string;\n  /**\n   * è¾“å…¥æ¡†å¤§å°\n   */\n  size?: \"sm\" | \"md\" | \"lg\";\n  /**\n   * å‰ç¼€å›¾æ ‡æˆ–å…ƒç´ \n   */\n  prefix?: React.ReactNode;\n  /**\n   * åç¼€å›¾æ ‡æˆ–å…ƒç´ \n   */\n  suffix?: React.ReactNode;\n  /**\n   * æ˜¯å¦ä¸ºå…¨å®½\n   */\n  fullWidth?: boolean;\n}\n\nexport const Input: React.FC<InputProps> = ({\n  label,\n  helpText,\n  error,\n  size = \"md\",\n  prefix,\n  suffix,\n  fullWidth = false,\n  className = \"\",\n  id,\n  ...props\n}) => {\n  // ç”Ÿæˆå”¯ä¸€ID\n  const inputId = id || `input-${Math.random().toString(36).substr(2, 9)}`;\n\n  const sizeClasses = {\n    sm: \"py-1 px-3 text-sm\",\n    md: \"py-2 px-4 text-base\",\n    lg: \"py-3 px-5 text-lg\",\n  };\n\n  const baseClasses =\n    \"block border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors\";\n  const widthClass = fullWidth ? \"w-full\" : \"\";\n  const stateClasses = error\n    ? \"border-red-500 text-red-900 placeholder-red-300 focus:ring-red-500 focus:border-red-500\"\n    : \"border-secondary-300 text-secondary-900 placeholder-secondary-400\";\n\n  return (\n    <div className={`${widthClass}`}>\n      {label && (\n        <label\n          htmlFor={inputId}\n          className=\"block text-sm font-medium text-secondary-700 mb-1\"\n        >\n          {label}\n        </label>\n      )}\n      <div className=\"relative\">\n        {prefix && (\n          <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n            {prefix}\n          </div>\n        )}\n        <input\n          id={inputId}\n          className={`\n            ${baseClasses}\n            ${sizeClasses[size]}\n            ${stateClasses}\n            ${prefix ? \"pl-10\" : \"\"}\n            ${suffix ? \"pr-10\" : \"\"}\n            ${widthClass}\n            ${className}\n          `}\n          {...props}\n        />\n        {suffix && (\n          <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none\">\n            {suffix}\n          </div>\n        )}\n      </div>\n      {helpText && !error && (\n        <p className=\"mt-1 text-sm text-secondary-500\">{helpText}</p>\n      )}\n      {error && <p className=\"mt-1 text-sm text-red-600\">{error}</p>}\n    </div>\n  );\n};\n","import React from 'react';\n\nexport interface BadgeProps {\n  /**\n   * å¾½ç« å†…å®¹\n   */\n  children: React.ReactNode;\n  /**\n   * å¾½ç« å˜ä½“\n   */\n  variant?: 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info';\n  /**\n   * å¾½ç« å¤§å°\n   */\n  size?: 'sm' | 'md' | 'lg';\n  /**\n   * æ˜¯å¦ä¸ºåœ†å½¢å¾½ç« \n   */\n  rounded?: boolean;\n  /**\n   * è‡ªå®šä¹‰ç±»å\n   */\n  className?: string;\n}\n\nexport const Badge: React.FC<BadgeProps> = ({\n  children,\n  variant = 'primary',\n  size = 'md',\n  rounded = false,\n  className = '',\n}) => {\n  // Tailwind ç±»åæ˜ å°„\n  const variantClasses = {\n    primary: 'bg-primary-100 text-primary-800',\n    secondary: 'bg-secondary-100 text-secondary-800',\n    success: 'bg-green-100 text-green-800',\n    danger: 'bg-red-100 text-red-800',\n    warning: 'bg-yellow-100 text-yellow-800',\n    info: 'bg-blue-100 text-blue-800',\n  };\n\n  const sizeClasses = {\n    sm: 'text-xs px-2 py-0.5',\n    md: 'text-sm px-2.5 py-0.5',\n    lg: 'text-base px-3 py-1',\n  };\n\n  const roundedClass = rounded ? 'rounded-full' : 'rounded';\n\n  return (\n    <span\n      className={`inline-flex items-center font-medium ${variantClasses[variant]} ${sizeClasses[size]} ${roundedClass} ${className}`}\n    >\n      {children}\n    </span>\n  );\n};","import { EthereumProvider, WalletSigner } from '../types';\n\nexport class SignerFactory {\n  /**\n   * ä» Provider åˆ›å»º Signer\n   * @param provider ä»¥å¤ªåŠæä¾›è€…\n   * @param address é’±åŒ…åœ°å€\n   * @returns WalletSigner å®ä¾‹\n   */\n  static createFromProvider(provider: EthereumProvider, address: string): WalletSigner {\n    return {\n      provider,\n      getAddress: () => address,\n      signMessage: async (message: string) => {\n        try {\n          return await provider.request({\n            method: \"personal_sign\",\n            params: [message, address],\n          }) as Promise<string>;\n        } catch (error) {\n          console.error(\"ç­¾åæ¶ˆæ¯å¤±è´¥:\", error);\n          throw new Error(\"ç­¾åæ¶ˆæ¯å¤±è´¥\");\n        }\n      },\n      signTransaction: async (transaction: unknown) => {\n        try {\n          return await provider.request({\n            method: \"eth_signTransaction\",\n            params: [transaction],\n          }) as Promise<string>;\n        } catch (error) {\n          console.error(\"ç­¾åäº¤æ˜“å¤±è´¥:\", error);\n          throw new Error(\"ç­¾åäº¤æ˜“å¤±è´¥\");\n        }\n      },\n      sendTransaction: async (transaction: unknown) => {\n        try {\n          return await provider.request({\n            method: \"eth_sendTransaction\",\n            params: [transaction],\n          });\n        } catch (error) {\n          console.error(\"å‘é€äº¤æ˜“å¤±è´¥:\", error);\n          throw new Error(\"å‘é€äº¤æ˜“å¤±è´¥\");\n        }\n      },\n      getNonce: async (blockTag?: string) => {\n        try {\n          const result = await provider.request({\n            method: \"eth_getTransactionCount\",\n            params: [address, blockTag || \"latest\"],\n          }) as string;\n          return parseInt(result, 16);\n        } catch (error) {\n          console.error(\"è·å– nonce å¤±è´¥:\", error);\n          throw new Error(\"è·å– nonce å¤±è´¥\");\n        }\n      },\n      connect: (newProvider: EthereumProvider) => {\n        return SignerFactory.createFromProvider(newProvider, address);\n      },\n    };\n  }\n\n  /**\n   * å®‰å…¨è½¬æ¢ Signer\n   * @param signer æœªçŸ¥ç±»å‹çš„ signer\n   * @returns å®‰å…¨çš„ WalletSigner æˆ– undefined\n   */\n  static ensureSafe(signer: unknown): WalletSigner | undefined {\n    if (!signer || typeof signer !== \"object\") {\n      return undefined;\n    }\n\n    const signerObj = signer as Record<string, unknown>;\n\n    if (\n      typeof signerObj.getAddress === \"function\" &&\n      typeof signerObj.signMessage === \"function\"\n    ) {\n      return {\n        provider: signerObj.provider as EthereumProvider,\n        getAddress: signerObj.getAddress(),\n        signMessage: signerObj.signMessage as (message: string) => Promise<string>,\n        connect:\n          typeof signerObj.connect === \"function\"\n            ? (signerObj.connect as (provider: EthereumProvider) => WalletSigner)\n            : undefined,\n        getNonce:\n          typeof signerObj.getNonce === \"function\"\n            ? (signerObj.getNonce as (blockTag?: string) => Promise<number>)\n            : undefined,\n        signTransaction:\n          typeof signerObj.signTransaction === \"function\"\n            ? (signerObj.signTransaction as (transaction: unknown) => Promise<string>)\n            : undefined,\n        sendTransaction:\n          typeof signerObj.sendTransaction === \"function\"\n            ? (signerObj.sendTransaction as (transaction: unknown) => Promise<unknown>)\n            : undefined,\n      };\n    }\n\n    return undefined;\n  }\n}","import { DetectedWallet, EthereumProvider, ExtendedWalletInfo, WalletConnectionResult, WalletConnector, WalletConnectResult } from '../types';\nimport { SignerFactory } from '../utils/SignerFactory';\nimport { Address } from 'viem';\n\ninterface EIP6963ProviderInfo {\n  uuid: string;\n  name: string;\n  icon: string;\n  rdns: string;\n}\n\ninterface EIP6963ProviderDetail {\n  info: EIP6963ProviderInfo;\n  provider: EthereumProvider;\n}\n\ninterface EIP6963AnnounceEvent extends Event {\n  detail: EIP6963ProviderDetail;\n}\n\ninterface WalletProvider extends EthereumProvider {\n  isMetaMask?: boolean;\n  isOkxWallet?: boolean;\n  isCoinbaseWallet?: boolean;\n  isRabby?: boolean;\n  isTrust?: boolean;\n}\n\ninterface DisconnectableProvider extends EthereumProvider {\n  disconnect?: () => Promise<void>;\n}\n\ndeclare global {\n  interface Window {\n    okxwallet?: EthereumProvider;\n    rabby?: EthereumProvider;\n    trustWallet?: EthereumProvider;\n  }\n}\n\ninterface WindowEthereum {\n  ethereum?: unknown;\n  okxwallet?: EthereumProvider;\n  rabby?: EthereumProvider;\n  trustWallet?: EthereumProvider;\n  coinbaseWalletExtension?: unknown;\n}\n\nexport class WalletManager {\n  private wallets = new Map<string, DetectedWallet>();\n  private initialized = false;\n\n  constructor() {\n    // ä¸åœ¨æ„é€ å‡½æ•°ä¸­è‡ªåŠ¨åˆå§‹åŒ–ï¼Œç­‰å¾…æ‰‹åŠ¨è°ƒç”¨\n  }\n\n  public initialize(): DetectedWallet[] {\n    if (this.initialized) {\n      console.log(\"ğŸ”„ WalletManager å·²ç»åˆå§‹åŒ–ï¼Œè¿”å›ç°æœ‰é’±åŒ…\");\n      return this.getWallets();\n    }\n\n    console.log(\"ğŸš€ åˆå§‹åŒ– WalletManager...\");\n    this.detectWallets();\n    this.initialized = true;\n    console.log(\"âœ… WalletManager åˆå§‹åŒ–å®Œæˆ\");\n    return this.getWallets();\n  }\n\n  public isInitialized(): boolean {\n    return this.initialized;\n  }\n\n  public async connectWallet(walletId: string): Promise<WalletConnectionResult> {\n    debugger; // æ–­ç‚¹7: WalletManager connectWallet å¼€å§‹\n    console.log(`ğŸ”Œ WalletManager è¿æ¥é’±åŒ…: ${walletId}`);\n\n    const wallet = this.getWalletById(walletId);\n    if (!wallet) {\n      throw new Error(`é’±åŒ… ${walletId} æœªæ‰¾åˆ°æˆ–æœªå®‰è£…`);\n    }\n\n    if (!wallet.createConnector) {\n      throw new Error(`é’±åŒ… ${wallet.name} ç¼ºå°‘è¿æ¥å™¨`);\n    }\n\n    try {\n      const connector = wallet.createConnector();\n      const result = await connector.connect();\n\n      console.log(`ğŸ‰ ${wallet.name} è¿æ¥å™¨è¿”å›ç»“æœ:`, result);\n\n      if (!result.accounts || result.accounts.length === 0) {\n        throw new Error(\"è¿æ¥å™¨æœªè¿”å›è´¦æˆ·ä¿¡æ¯\");\n      }\n\n      const address = result.accounts[0];\n      const provider: EthereumProvider = connector.provider || wallet.provider;\n      const chainId = result.chainId || await this.getChainIdSafe(provider);\n\n      const connectionResult = {\n        success: true,\n        address: address as Address,\n        chainId,\n        wallet: {\n          id: wallet.id,\n          name: wallet.name,\n          installed: wallet.installed,\n        },\n        provider,\n        signer: SignerFactory.createFromProvider(provider, address),\n      };\n\n      console.log(`âœ… ${wallet.name} æœ€ç»ˆè¿æ¥ç»“æœ:`, connectionResult);\n\n      // è§¦å‘è¿æ¥äº‹ä»¶\n      this.emit('connect', {\n        address,\n        chainId,\n        walletId: wallet.id,\n        wallet: {\n          id: wallet.id,\n          name: wallet.name,\n          installed: wallet.installed,\n        }\n      });\n\n      return connectionResult;\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯';\n      console.error(`âŒ è¿æ¥é’±åŒ… ${wallet.name} å¤±è´¥:`, error);\n      throw new Error(`è¿æ¥é’±åŒ…å¤±è´¥: ${errorMessage}`);\n    }\n  }\n\n  public async disconnectWallet(walletId: string): Promise<void> {\n    console.log(`ğŸ”Œ WalletManager æ–­å¼€é’±åŒ…: ${walletId}`);\n\n    if (!walletId) {\n      console.warn(\"âš ï¸ é’±åŒ…IDä¸ºç©ºï¼Œè·³è¿‡æ–­å¼€è¿æ¥\");\n      return;\n    }\n\n    const wallet = this.getWalletById(walletId);\n    if (!wallet) {\n      console.warn(`âš ï¸ é’±åŒ… ${walletId} æœªæ‰¾åˆ°ï¼Œè·³è¿‡æ–­å¼€è¿æ¥`);\n      return;\n    }\n\n    if (!wallet.createConnector) {\n      console.warn(`âš ï¸ é’±åŒ… ${wallet.name} ç¼ºå°‘è¿æ¥å™¨ï¼Œè·³è¿‡æ–­å¼€è¿æ¥`);\n      return;\n    }\n\n    try {\n      const connector = wallet.createConnector();\n      if (connector.disconnect) {\n        await connector.disconnect();\n        console.log(`âœ… é’±åŒ… ${wallet.name} æ–­å¼€è¿æ¥æˆåŠŸ`);\n      } else {\n        console.log(`â„¹ï¸ é’±åŒ… ${wallet.name} ä¸æ”¯æŒç¨‹åºåŒ–æ–­å¼€è¿æ¥`);\n      }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯';\n      console.error(`âŒ æ–­å¼€é’±åŒ… ${wallet.name} å¤±è´¥:`, error);\n    }\n  }\n\n  public async disconnectAll(): Promise<void> {\n    console.log(\"ğŸ”Œ WalletManager æ–­å¼€æ‰€æœ‰é’±åŒ…è¿æ¥\");\n\n    const wallets = this.getWallets();\n    const disconnectPromises = wallets.map(wallet =>\n      this.disconnectWallet(wallet.id).catch(error => {\n        console.warn(`æ–­å¼€é’±åŒ… ${wallet.name} æ—¶å‡ºé”™:`, error);\n      })\n    );\n\n    await Promise.allSettled(disconnectPromises);\n    console.log(\"âœ… æ‰€æœ‰é’±åŒ…æ–­å¼€è¿æ¥å®Œæˆ\");\n  }\n\n  private async getChainIdSafe(provider: EthereumProvider): Promise<number | undefined> {\n    try {\n      const chainIdHex = await provider.request({ method: \"eth_chainId\" });\n      if (typeof chainIdHex === 'string' && /^0x[0-9a-fA-F]+$/.test(chainIdHex)) {\n        return parseInt(chainIdHex, 16);\n      }\n    } catch (error) {\n      console.warn(\"è·å–é“¾ ID å¤±è´¥:\", error);\n    }\n    return undefined;\n  }\n\n  private detectWallets(): void {\n    if (typeof window === 'undefined') {\n      console.log(\"âš ï¸ éæµè§ˆå™¨ç¯å¢ƒï¼Œè·³è¿‡é’±åŒ…æ£€æµ‹\");\n      return;\n    }\n\n    console.log(\"ğŸ” å¼€å§‹æ£€æµ‹é’±åŒ…...\");\n    this.detectEIP6963Wallets();\n    this.detectLegacyWallets();\n    console.log(`ğŸ¯ æ£€æµ‹å®Œæˆï¼Œæ‰¾åˆ° ${this.wallets.size} ä¸ªé’±åŒ…`);\n  }\n\n  private detectEIP6963Wallets(): void {\n    const announceEvent = 'eip6963:announceProvider';\n    const requestEvent = 'eip6963:requestProvider';\n\n    const handleAnnounce = (event: Event): void => {\n      const announceEvent = event as EIP6963AnnounceEvent;\n      const detail: EIP6963ProviderDetail = announceEvent.detail;\n      this.addWallet(detail);\n    };\n\n    window.addEventListener(announceEvent, handleAnnounce);\n    window.dispatchEvent(new Event(requestEvent));\n  }\n\n  private detectLegacyWallets(): void {\n    const windowEth = window as unknown as WindowEthereum;\n    const ethereum = this.getEthereumProvider(windowEth);\n\n    if (!ethereum) {\n      console.log(\"âš ï¸ æœªæ‰¾åˆ° window.ethereum\");\n      return;\n    }\n\n    const provider = ethereum as WalletProvider;\n\n    // MetaMask\n    if (provider.isMetaMask) {\n      this.addLegacyWallet('metamask', 'MetaMask', provider);\n    }\n\n    // OKX\n    if (provider.isOkxWallet || windowEth.okxwallet) {\n      const okxProvider = windowEth.okxwallet || provider;\n      this.addLegacyWallet('okx', 'OKX Wallet', okxProvider);\n    }\n\n    // Coinbase\n    if (provider.isCoinbaseWallet) {\n      this.addLegacyWallet('coinbase', 'Coinbase Wallet', provider);\n    } else {\n      const coinbaseProvider = this.getCoinbaseWalletExtension(windowEth);\n      if (coinbaseProvider) {\n        this.addLegacyWallet('coinbase', 'Coinbase Wallet', coinbaseProvider);\n      }\n    }\n\n    // Rabby\n    if (provider.isRabby || windowEth.rabby) {\n      const rabbyProvider = windowEth.rabby || provider;\n      this.addLegacyWallet('rabby', 'Rabby Wallet', rabbyProvider);\n    }\n\n    // Trust Wallet\n    if (provider.isTrust || windowEth.trustWallet) {\n      const trustProvider = windowEth.trustWallet || provider;\n      this.addLegacyWallet('trust', 'Trust Wallet', trustProvider);\n    }\n  }\n\n  private getEthereumProvider(windowEth: WindowEthereum): EthereumProvider | null {\n    try {\n      const ethereum = windowEth.ethereum;\n\n      if (\n        ethereum &&\n        typeof ethereum === 'object' &&\n        'request' in ethereum &&\n        typeof (ethereum as { request: unknown }).request === 'function'\n      ) {\n        return ethereum as EthereumProvider;\n      }\n    } catch (error) {\n      console.warn(\"è·å– ethereum provider å¤±è´¥:\", error);\n    }\n    return null;\n  }\n\n  private getCoinbaseWalletExtension(windowEth: WindowEthereum): EthereumProvider | null {\n    try {\n      const coinbaseExtension = windowEth.coinbaseWalletExtension;\n\n      if (\n        coinbaseExtension &&\n        typeof coinbaseExtension === 'object' &&\n        'request' in coinbaseExtension &&\n        typeof (coinbaseExtension as { request: unknown }).request === 'function'\n      ) {\n        return coinbaseExtension as EthereumProvider;\n      }\n    } catch (error) {\n      console.warn(\"è·å– Coinbase Wallet Extension å¤±è´¥:\", error);\n    }\n    return null;\n  }\n\n  private addWallet(detail: EIP6963ProviderDetail): void {\n    const wallet: DetectedWallet = {\n      id: this.normalizeWalletId(detail.info.rdns),\n      name: detail.info.name,\n      icon: detail.info.icon,\n      rdns: detail.info.rdns,\n      provider: detail.provider,\n      installed: true,\n      type: 'eip6963',\n      createConnector: () => this.createStandardConnector(detail.provider, detail.info.name)\n    };\n\n    console.log(`ğŸ” æ£€æµ‹åˆ°é’±åŒ… (EIP-6963): ${wallet.name}`, wallet);\n    this.wallets.set(wallet.id, wallet);\n  }\n\n  private addLegacyWallet(id: string, name: string, provider: EthereumProvider): void {\n    if (this.wallets.has(id)) {\n      console.log(`âš ï¸ é’±åŒ… ${name} å·²å­˜åœ¨ï¼Œè·³è¿‡`);\n      return;\n    }\n\n    const wallet: DetectedWallet = {\n      id,\n      name,\n      icon: this.getDefaultIcon(id),\n      rdns: `legacy.${id}`,\n      provider,\n      installed: true,\n      type: 'legacy',\n      createConnector: () => this.createStandardConnector(provider, name)\n    };\n\n    console.log(`ğŸ” æ£€æµ‹åˆ°é’±åŒ… (Legacy): ${wallet.name}`, wallet);\n    this.wallets.set(wallet.id, wallet);\n  }\n\n  private createStandardConnector(provider: EthereumProvider, walletName: string): WalletConnector {\n    console.log(`ğŸ”Œ ä¸º ${walletName} åˆ›å»ºæ ‡å‡†è¿æ¥å™¨`);\n\n    const connector: WalletConnector = {\n      id: '',\n      name: walletName,\n      provider,\n\n      connect: async (): Promise<WalletConnectResult> => {\n        console.log(`ğŸ”„ ${walletName} è¿æ¥ä¸­...`);\n        console.log(`ğŸ” æ£€æŸ¥ provider:`, provider);\n        console.log(`ğŸ” Provider ç±»å‹:`, typeof provider);\n        console.log(`ğŸ” Provider æ˜¯å¦æœ‰ request æ–¹æ³•:`, typeof provider.request);\n\n        try {\n          debugger; // æ–­ç‚¹: è°ƒç”¨ eth_requestAccounts å‰ï¼Œæ£€æŸ¥ provider\n          const accounts = await provider.request({\n            method: 'eth_requestAccounts'\n          });\n          console.log(`âœ… ${walletName} è¿æ¥æˆåŠŸ:`, accounts);\n\n          const accountsArray = Array.isArray(accounts)\n            ? accounts.filter((acc): acc is string => typeof acc === 'string')\n            : typeof accounts === 'string'\n              ? [accounts]\n              : [];\n\n          if (accountsArray.length === 0) {\n            throw new Error('æœªè·å–åˆ°æœ‰æ•ˆçš„è´¦æˆ·åœ°å€');\n          }\n\n          const chainId = await this.getChainIdAsNumber(provider);\n\n          const result: WalletConnectResult = {\n            accounts: accountsArray,\n            chainId,\n            provider\n          };\n\n          return result;\n\n        } catch (error) {\n          const errorMessage = error instanceof Error ? error.message : 'è¿æ¥å¤±è´¥';\n          console.error(`âŒ ${walletName} è¿æ¥å¤±è´¥:`, error);\n          throw new Error(`${walletName} è¿æ¥å¤±è´¥: ${errorMessage}`);\n        }\n      },\n\n      disconnect: async (): Promise<void> => {\n        console.log(`ğŸ”Œ ${walletName} è¿æ¥å™¨æ–­å¼€è¿æ¥`);\n\n        try {\n          const disconnectableProvider = provider as DisconnectableProvider;\n          if (disconnectableProvider.disconnect && typeof disconnectableProvider.disconnect === 'function') {\n            await disconnectableProvider.disconnect();\n            console.log(`âœ… ${walletName} provider æ–­å¼€æˆåŠŸ`);\n          } else {\n            console.log(`â„¹ï¸ ${walletName} ä¸æ”¯æŒç¨‹åºåŒ–æ–­å¼€ï¼Œéœ€è¦ç”¨æˆ·æ‰‹åŠ¨æ–­å¼€`);\n          }\n        } catch (error) {\n          console.warn(`âš ï¸ ${walletName} æ–­å¼€è¿æ¥æ—¶å‡ºé”™:`, error);\n        }\n      }\n    };\n\n    return connector;\n  }\n\n  private async getChainIdAsNumber(provider: EthereumProvider): Promise<number | undefined> {\n    try {\n      const chainIdHex = await provider.request({ method: \"eth_chainId\" });\n      if (typeof chainIdHex === 'string' && /^0x[0-9a-fA-F]+$/.test(chainIdHex)) {\n        return parseInt(chainIdHex, 16);\n      }\n      if (typeof chainIdHex === 'number') {\n        return chainIdHex;\n      }\n    } catch (error) {\n      console.warn(\"è·å–é“¾ ID å¤±è´¥:\", error);\n    }\n    return undefined;\n  }\n\n  private normalizeWalletId(rdns: string): string {\n    const idMap: Record<string, string> = {\n      'io.metamask': 'metamask',\n      'com.okex.wallet': 'okx',\n      'com.coinbase.wallet': 'coinbase',\n      'io.rabby': 'rabby',\n      'com.trustwallet.app': 'trust'\n    };\n\n    return idMap[rdns] || rdns.split('.').pop() || rdns;\n  }\n\n  private getDefaultIcon(id: string): string {\n    const iconMap: Record<string, string> = {\n      'metamask': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSI+PC9zdmc+',\n      'okx': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSI+PC9zdmc+',\n      'coinbase': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSI+PC9zdmc+',\n      'rabby': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSI+PC9zdmc+',\n      'trust': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSI+PC9zdmc+'\n    };\n\n    return iconMap[id] || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSI+PC9zdmc+';\n  }\n\n  // å…¬å…±æ–¹æ³•\n  public getWallets(): DetectedWallet[] {\n    if (!this.initialized) {\n      console.warn(\"âš ï¸ WalletManager æœªåˆå§‹åŒ–ï¼Œè¿”å›ç©ºæ•°ç»„\");\n      return [];\n    }\n    return Array.from(this.wallets.values());\n  }\n\n  public getWalletById(id: string): DetectedWallet | null {\n    if (!this.initialized) {\n      console.warn(\"âš ï¸ WalletManager æœªåˆå§‹åŒ–\");\n      return null;\n    }\n    return this.wallets.get(id) || null;\n  }\n\n  public isWalletInstalled(id: string): boolean {\n    if (!this.initialized) {\n      console.warn(\"âš ï¸ WalletManager æœªåˆå§‹åŒ–\");\n      return false;\n    }\n    return this.wallets.has(id);\n  }\n\n  public getAvailableWallets(): ExtendedWalletInfo[] {\n    return this.getWallets().map(wallet => ({\n      id: wallet.id,\n      name: wallet.name,\n      installed: wallet.installed,\n      provider: wallet.provider,\n      iconUrl: wallet.icon || this.getDefaultIcon(wallet.id),\n      icon: wallet.icon,\n      rdns: wallet.rdns,\n      type: wallet.type,\n    }));\n  }\n\n  public getExtendedWalletById(id: string): ExtendedWalletInfo | null {\n    const wallet = this.getWalletById(id);\n    if (!wallet) return null;\n\n    return {\n      id: wallet.id,\n      name: wallet.name,\n      installed: wallet.installed,\n      provider: wallet.provider,\n      iconUrl: wallet.icon || this.getDefaultIcon(id),\n      icon: wallet.icon,\n      rdns: wallet.rdns,\n      type: wallet.type,\n    };\n  }\n\n  // äº‹ä»¶ç³»ç»Ÿ\n  private eventHandlers = new Map<string, ((data?: any) => void)[]>();\n\n  public on(event: string, handler: (data?: any) => void): void {\n    if (!this.eventHandlers.has(event)) {\n      this.eventHandlers.set(event, []);\n    }\n    this.eventHandlers.get(event)!.push(handler);\n  }\n\n  public off(event: string, handler: (data?: any) => void): void {\n    const handlers = this.eventHandlers.get(event);\n    if (handlers) {\n      const index = handlers.indexOf(handler);\n      if (index > -1) {\n        handlers.splice(index, 1);\n      }\n    }\n  }\n\n  private emit(event: string, data?: any): void {\n    const handlers = this.eventHandlers.get(event);\n    if (handlers) {\n      handlers.forEach(handler => {\n        try {\n          handler(data);\n        } catch (error) {\n          console.error(`äº‹ä»¶å¤„ç†å™¨é”™è¯¯ [${event}]:`, error);\n        }\n      });\n    }\n  }\n}","\"use client\";\n\nimport React, {\n  createContext,\n  useContext,\n  useEffect,\n  useState,\n  useCallback,\n} from 'react';\nimport { WalletManager } from '../core/WalletManager';\nimport { WalletDeduplicator } from '../utils/WalletDeduplicator';\nimport WalletModal from './WalletModal';\nimport {\n  WalletContextValue,\n  WalletState,\n  ConnectionResult,\n  TokenBalance,\n  WalletSDKConfig,\n  ExtendedWalletInfo,\n  DetectedWallet,\n  WalletProviderProps,\n  ChainInfo,\n  WalletGroup,\n  EthereumProvider,\n  WalletCreateConfig,\n  WalletConnectionResult,\n} from '../types';\nimport { Address, formatEther, formatUnits } from 'viem';\n\nconst WalletContext = createContext<WalletContextValue>({\n  address: \"0x\" as Address,\n  chainId: null,\n  isConnecting: false,\n  isConnected: false,\n  isDisconnected: true,\n  isReconnecting: false,\n  ensName: null,\n  error: null,\n  chains: [],\n  provider: undefined,\n  balance: \"0.0000\",\n  wallet: undefined,\n  signer: undefined,\n  connect: async () => ({ success: false, error: 'æœªåˆå§‹åŒ–' }),\n  disconnect: async () => {},\n  switchChain: async () => {},\n  openModal: () => {},\n  closeModal: () => {},\n  walletInstances: {},\n  detectedWallets: [],\n  walletsLoading: true,\n  fetchBalance: async () => {},\n  balanceLoading: false,\n  getTokenBalance: async () => ({\n    balance: '0',\n    decimals: 18,\n    symbol: '',\n    loading: false,\n    error: 'é’±åŒ…æœªè¿æ¥',\n  }),\n});\n\nexport const WalletProvider: React.FC<WalletProviderProps> = ({\n  children,\n  config,\n  chains,\n  provider,\n  autoConnect,\n  wallets\n}) => {\n  const [walletManager, setWalletManager] = useState<WalletManager | null>(null);\n  const [state, setState] = useState<WalletState>({\n    address: \"0x\" as Address,\n    chainId: null,\n    isConnecting: false,\n    isConnected: false,\n    isDisconnected: true,\n    isReconnecting: false,\n    ensName: null,\n    error: null,\n    chains: chains || config.chains || [],\n    provider: provider || config.provider,\n    balance: \"0.0000\",\n    wallet: undefined,\n    signer: undefined,\n  });\n\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [detectedWallets, setDetectedWallets] = useState<DetectedWallet[]>([]);\n  const [walletsLoading, setWalletsLoading] = useState(true);\n  const [walletInstances, setWalletInstances] = useState<{\n    [groupName: string]: ExtendedWalletInfo[];\n  }>({});\n  const [currentWalletId, setCurrentWalletId] = useState(\"\");\n  const [autoConnectAttempted, setAutoConnectAttempted] = useState(false);\n  const [balanceLoading, setBalanceLoading] = useState(false);\n\n  // åˆ›å»º tokenBalanceCache æ¥ç¼“å­˜ä»£å¸ä½™é¢ä¿¡æ¯\n  const [tokenBalanceCache, setTokenBalanceCache] = useState<{\n    [tokenAddress: string]: {\n      balance: string;\n      decimals: number;\n      symbol: string;\n      lastUpdated: number;\n    };\n  }>({});\n\n  // åˆå§‹åŒ–é’±åŒ…ç®¡ç†å™¨\n  useEffect(() => {\n    const initializeWalletManager = async () => {\n      try {\n        console.log(\"ğŸš€ åˆå§‹åŒ– WalletManager...\");\n        const manager = new WalletManager();\n\n        // ä½¿ç”¨ä¼ å…¥çš„é…ç½®æˆ–é»˜è®¤é…ç½®\n        const walletConfig = {\n          projectId: config.projectId,\n          chains: chains || config.chains || [],\n          storage: config.storage || (typeof window !== 'undefined' ? window.localStorage : undefined),\n          ...config\n        };\n\n        manager.initialize();\n        const detectedWallets = manager.getWallets();\n        setWalletManager(manager);\n\n        // è®¾ç½®äº‹ä»¶ç›‘å¬\n        manager.on('connect', (data) => {\n          console.log(\"ğŸ”— é’±åŒ…è¿æ¥äº‹ä»¶:\", data);\n          setState(prev => ({\n            ...prev,\n            isConnected: true,\n            isConnecting: false,\n            isDisconnected: false,\n            address: data.address as Address,\n            chainId: data.chainId,\n            wallet: data.wallet ? {\n              id: data.wallet.id || data.walletId,\n              name: data.wallet.name || 'Unknown',\n              installed: true\n            } : undefined,\n            error: null,\n          }));\n          setCurrentWalletId(data.walletId);\n        });\n\n        manager.on('disconnect', () => {\n          console.log(\"ğŸ”Œ é’±åŒ…æ–­å¼€äº‹ä»¶\");\n          setState(prev => ({\n            ...prev,\n            isConnected: false,\n            isDisconnected: true,\n            isConnecting: false,\n            address: \"0x\" as Address,\n            chainId: null,\n            wallet: undefined,\n            balance: \"0.0000\",\n            signer: undefined,\n            error: null,\n          }));\n          setCurrentWalletId(\"\");\n        });\n\n        manager.on('chainChanged', (data) => {\n          console.log(\"ğŸ”„ é“¾å˜åŒ–äº‹ä»¶:\", data);\n          setState(prev => ({\n            ...prev,\n            chainId: data.chainId,\n          }));\n        });\n\n        manager.on('accountChanged', (data) => {\n          console.log(\"ğŸ‘¤ è´¦æˆ·å˜åŒ–äº‹ä»¶:\", data);\n          setState(prev => ({\n            ...prev,\n            address: (data.accounts[0] || \"0x\") as Address,\n          }));\n        });\n\n        manager.on('error', (data) => {\n          console.error(\"âŒ é’±åŒ…é”™è¯¯äº‹ä»¶:\", data);\n          setState(prev => ({\n            ...prev,\n            error: new Error(data.error),\n            isConnecting: false,\n          }));\n        });\n\n        console.log(\"âœ… WalletManager åˆå§‹åŒ–å®Œæˆ\");\n      } catch (error) {\n        console.error('åˆå§‹åŒ– WalletManager å¤±è´¥:', error);\n        setState(prev => ({\n          ...prev,\n          error: error instanceof Error ? error : new Error('åˆå§‹åŒ–å¤±è´¥'),\n        }));\n      }\n    };\n\n    initializeWalletManager();\n\n    return () => {\n      // æ¸…ç†äº‹ä»¶ç›‘å¬\n      if (walletManager) {\n        walletManager.off('connect', () => {});\n        walletManager.off('disconnect', () => {});\n        walletManager.off('chainChanged', () => {});\n        walletManager.off('accountChanged', () => {});\n        walletManager.off('error', () => {});\n      }\n    };\n  }, [config, chains, provider]);\n\n  // åˆå§‹åŒ–é’±åŒ…æ£€æµ‹\n  useEffect(() => {\n    const initWallets = async () => {\n      if (!walletManager) return;\n\n      try {\n        setWalletsLoading(true);\n        console.log(\"ğŸ”„ å¼€å§‹é’±åŒ…æ£€æµ‹...\");\n\n        // æ£€æµ‹å¯ç”¨é’±åŒ…\n        const detectedWallets = walletManager.getWallets();\n        console.log(\"ğŸ“‹ æ£€æµ‹åˆ°çš„åŸå§‹é’±åŒ…:\", detectedWallets);\n\n        // æ„å»ºé…ç½®çš„é’±åŒ…å®ä¾‹\n        const configuredInstances: { [groupName: string]: ExtendedWalletInfo[] } = {};\n        if (wallets && config.projectId) {\n          wallets.forEach((group) => {\n            if (group.groupName && group.wallets) {\n              const groupWallets = group.wallets.map((createWalletFn) => {\n                return createWalletFn({\n                  projectId: config.projectId!,\n                  appName: config.appName,\n                });\n              });\n              if (groupWallets.length > 0) {\n                configuredInstances[group.groupName] = groupWallets;\n              }\n            }\n          });\n        }\n\n        // ä½¿ç”¨å»é‡å™¨å¤„ç†é’±åŒ…\n        const { filtered: filteredDetected, staticFiltered } = WalletDeduplicator.deduplicate(\n          detectedWallets,\n          configuredInstances\n        );\n\n        console.log(\"ğŸ¯ å»é‡åçš„æ£€æµ‹é’±åŒ…:\", filteredDetected);\n        console.log(\"ğŸ¯ å»é‡åçš„é…ç½®é’±åŒ…:\", staticFiltered);\n\n        setDetectedWallets(filteredDetected);\n\n        // æ„å»ºæœ€ç»ˆçš„é’±åŒ…å®ä¾‹\n        const finalInstances: { [groupName: string]: ExtendedWalletInfo[] } = {};\n\n        // æ·»åŠ æ£€æµ‹åˆ°çš„é’±åŒ…\n        if (filteredDetected.length > 0) {\n          const detectedAsExtended: ExtendedWalletInfo[] = filteredDetected.map(wallet => ({\n            id: wallet.id,\n            name: wallet.name,\n            installed: wallet.installed,\n            provider: wallet.provider,\n            iconUrl: wallet.icon,\n            icon: wallet.icon,\n            rdns: wallet.rdns,\n            type: wallet.type,\n          }));\n          finalInstances[\"å·²å®‰è£…çš„é’±åŒ…\"] = detectedAsExtended;\n        }\n\n        // æ·»åŠ è¿‡æ»¤åçš„é…ç½®é’±åŒ…ç»„\n        Object.entries(staticFiltered).forEach(([groupName, walletsInGroup]) => {\n          if (walletsInGroup.length > 0) {\n            finalInstances[groupName] = walletsInGroup;\n          }\n        });\n\n        setWalletInstances(finalInstances);\n        console.log(\"ğŸ“¦ æœ€ç»ˆé’±åŒ…å®ä¾‹:\", finalInstances);\n      } catch (error) {\n        console.error(\"âŒ é’±åŒ…æ£€æµ‹å¤±è´¥:\", error);\n        setState(prev => ({\n          ...prev,\n          error: error instanceof Error ? error : new Error(\"é’±åŒ…æ£€æµ‹å¤±è´¥\"),\n        }));\n      } finally {\n        setWalletsLoading(false);\n      }\n    };\n\n    initWallets();\n  }, [walletManager, wallets, config.projectId, config.appName]);\n\n  // è¿æ¥é’±åŒ…\n  const connect = useCallback(async (walletId: string): Promise<ConnectionResult> => {\n    if (!walletManager) {\n      console.error('âŒ WalletProvider - WalletManager æœªåˆå§‹åŒ–');\n      return {\n        success: false,\n        error: 'WalletManager æœªåˆå§‹åŒ–',\n      };\n    }\n\n    console.log(\"ğŸš€ WalletProvider - å¼€å§‹è¿æ¥é’±åŒ…:\", walletId);\n\n    setState(prev => ({\n      ...prev,\n      isConnecting: true,\n      isDisconnected: false,\n      error: null\n    }));\n\n    try {\n      console.log(\"  ğŸ”Œ è°ƒç”¨ walletManager.connectWallet...\");\n      const result = await walletManager.connectWallet(walletId);\n\n      console.log(\"âœ… WalletProvider - é’±åŒ…è¿æ¥æˆåŠŸ:\", result);\n\n      // çŠ¶æ€ä¼šé€šè¿‡äº‹ä»¶ç›‘å¬å™¨è‡ªåŠ¨æ›´æ–°\n      setIsModalOpen(false);\n\n      // ä¿å­˜è¿æ¥çŠ¶æ€\n      if (typeof window !== 'undefined' && config.storage) {\n        config.storage.setItem('lastConnectedWallet', walletId);\n        config.storage.setItem('walletAddress', result.address || '');\n        config.storage.setItem('lastConnectionTime', Date.now().toString());\n      }\n\n      return {\n        success: true,\n        address: result.address,\n        chainId: result.chainId,\n        wallet: result.wallet,\n        provider: result.provider,\n      };\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'è¿æ¥å¤±è´¥';\n      console.error(\"âŒ WalletProvider - é’±åŒ…è¿æ¥å¤±è´¥:\", error);\n\n      setState(prev => ({\n        ...prev,\n        isConnecting: false,\n        isDisconnected: true,\n        error: new Error(errorMessage),\n      }));\n\n      return {\n        success: false,\n        error: errorMessage,\n      };\n    }\n  }, [walletManager, config.storage]);\n\n  // æ–­å¼€è¿æ¥\n  const disconnect = useCallback(async (): Promise<void> => {\n    console.log(\"ğŸ”Œ å¼€å§‹æ–­å¼€é’±åŒ…è¿æ¥\", { walletId: currentWalletId });\n\n    try {\n      // è°ƒç”¨ walletManager çš„æ–­å¼€è¿æ¥æ–¹æ³•\n      if (walletManager) {\n        await walletManager.disconnectWallet(currentWalletId);\n      }\n    } catch (error) {\n      console.warn(\"âš ï¸ æ–­å¼€é’±åŒ…è¿æ¥å™¨æ—¶å‡ºé”™:\", error);\n      // ä¸æŠ›å‡ºé”™è¯¯ï¼Œå› ä¸ºæ–­å¼€è¿æ¥å¤±è´¥ä¸åº”è¯¥é˜»æ­¢æ¸…ç†æµç¨‹\n    }\n\n    // æ¸…ç†æœ¬åœ°å­˜å‚¨\n    if (typeof window !== 'undefined' && config.storage) {\n      config.storage.removeItem('lastConnectedWallet');\n      config.storage.removeItem('walletAddress');\n      config.storage.removeItem('lastConnectionTime');\n      console.log(\"ğŸ§¹ å·²æ¸…ç†æœ¬åœ°å­˜å‚¨\");\n    }\n\n    // é‡ç½®çŠ¶æ€\n    setState(prev => ({\n      ...prev,\n      isConnected: false,\n      isDisconnected: true,\n      address: \"0x\" as Address,\n      chainId: null,\n      wallet: undefined,\n      signer: undefined,\n      balance: \"0.0000\",\n      isConnecting: false,\n      error: null,\n    }));\n\n    // é‡ç½®å½“å‰é’±åŒ…ID\n    setCurrentWalletId(\"\");\n\n    // æ¸…ç†ä»£å¸ä½™é¢ç¼“å­˜\n    setTokenBalanceCache({});\n\n    console.log(\"âœ… é’±åŒ…æ–­å¼€è¿æ¥å®Œæˆ\");\n  }, [walletManager, currentWalletId, config.storage]);\n\n  // åˆ‡æ¢é“¾\n  const switchChain = useCallback(async (chainId: number): Promise<void> => {\n    if (!walletManager) throw new Error('WalletManager æœªåˆå§‹åŒ–');\n\n    try {\n      console.log(\"ğŸ”„ åˆ‡æ¢é“¾:\", chainId);\n\n      // è·å–å½“å‰è¿æ¥çš„é’±åŒ…\n      const currentWallet = walletManager.getWalletById(currentWalletId);\n      if (!currentWallet) {\n        throw new Error('æœªæ‰¾åˆ°å½“å‰è¿æ¥çš„é’±åŒ…');\n      }\n\n      const provider = currentWallet.provider;\n\n      // å°† chainId è½¬æ¢ä¸ºåå…­è¿›åˆ¶\n      const chainIdHex = `0x${chainId.toString(16)}`;\n\n      try {\n        // å°è¯•åˆ‡æ¢åˆ°æŒ‡å®šé“¾\n        await provider.request({\n          method: 'wallet_switchEthereumChain',\n          params: [{ chainId: chainIdHex }],\n        });\n\n        console.log(`âœ… æˆåŠŸåˆ‡æ¢åˆ°é“¾ ${chainId}`);\n\n        // æ›´æ–°çŠ¶æ€\n        setState(prev => ({ ...prev, chainId }));\n\n        // è§¦å‘é“¾å˜åŒ–äº‹ä»¶\n        if (walletManager) {\n          (walletManager as any).emit?.('chainChanged', { chainId });\n        }\n\n      } catch (switchError: any) {\n        // å¦‚æœé“¾ä¸å­˜åœ¨ï¼Œå¯èƒ½éœ€è¦æ·»åŠ é“¾\n        if (switchError.code === 4902) {\n          console.log(`é“¾ ${chainId} ä¸å­˜åœ¨ï¼Œå°è¯•æ·»åŠ ...`);\n\n          // è·å–é“¾é…ç½®\n          const chainConfig = getChainConfig(chainId);\n          if (chainConfig) {\n            await provider.request({\n              method: 'wallet_addEthereumChain',\n              params: [chainConfig],\n            });\n\n            console.log(`âœ… æˆåŠŸæ·»åŠ å¹¶åˆ‡æ¢åˆ°é“¾ ${chainId}`);\n            setState(prev => ({ ...prev, chainId }));\n          } else {\n            throw new Error(`ä¸æ”¯æŒçš„é“¾ ID: ${chainId}`);\n          }\n        } else {\n          throw switchError;\n        }\n      }\n\n    } catch (error) {\n      console.error('åˆ‡æ¢é“¾å¤±è´¥:', error);\n      throw error;\n    }\n  }, [walletManager, currentWalletId]);\n\n  // è·å–é“¾é…ç½®\n  const getChainConfig = (chainId: number) => {\n    const chainConfigs: Record<number, any> = {\n      1: {\n        chainId: '0x1',\n        chainName: 'Ethereum Mainnet',\n        nativeCurrency: {\n          name: 'Ether',\n          symbol: 'ETH',\n          decimals: 18,\n        },\n        rpcUrls: ['https://mainnet.infura.io/v3/YOUR_INFURA_KEY'],\n        blockExplorerUrls: ['https://etherscan.io'],\n      },\n      11155111: {\n        chainId: '0xaa36a7',\n        chainName: 'Sepolia test network',\n        nativeCurrency: {\n          name: 'Sepolia Ether',\n          symbol: 'SepoliaETH',\n          decimals: 18,\n        },\n        rpcUrls: ['https://sepolia.infura.io/v3/YOUR_INFURA_KEY'],\n        blockExplorerUrls: ['https://sepolia.etherscan.io'],\n      },\n      137: {\n        chainId: '0x89',\n        chainName: 'Polygon Mainnet',\n        nativeCurrency: {\n          name: 'MATIC',\n          symbol: 'MATIC',\n          decimals: 18,\n        },\n        rpcUrls: ['https://polygon-rpc.com'],\n        blockExplorerUrls: ['https://polygonscan.com'],\n      },\n      56: {\n        chainId: '0x38',\n        chainName: 'BNB Smart Chain',\n        nativeCurrency: {\n          name: 'BNB',\n          symbol: 'BNB',\n          decimals: 18,\n        },\n        rpcUrls: ['https://bsc-dataseed.binance.org'],\n        blockExplorerUrls: ['https://bscscan.com'],\n      },\n    };\n\n    return chainConfigs[chainId];\n  };\n\n  // è·å–ä½™é¢\n  const fetchBalance = useCallback(async (): Promise<void> => {\n    if (!state.isConnected || !state.address) {\n      console.log(\"âš ï¸ ä½™é¢è·å–è·³è¿‡ - é’±åŒ…æœªè¿æ¥æˆ–åœ°å€ä¸ºç©º\", {\n        isConnected: state.isConnected,\n        address: state.address\n      });\n      return;\n    }\n\n    try {\n      setBalanceLoading(true);\n      console.log(\"ğŸ’° å¼€å§‹è·å–ä½™é¢...\", state.address);\n      console.log(\"ğŸ” å½“å‰ chainId:\", state.chainId);\n\n      // è·å–å½“å‰è¿æ¥çš„é’±åŒ…\n      const currentWallet = walletManager?.getWalletById(currentWalletId);\n      if (!currentWallet) {\n        console.warn(\"âš ï¸ æœªæ‰¾åˆ°å½“å‰è¿æ¥çš„é’±åŒ…\", {\n          currentWalletId,\n          availableWallets: walletManager?.getWallets().map(w => w.id)\n        });\n        return;\n      }\n\n      console.log(\"ğŸ¯ æ‰¾åˆ°å½“å‰é’±åŒ…:\", currentWallet.name);\n      const provider = currentWallet.provider;\n\n      // ä½¿ç”¨ eth_getBalance è·å–ä½™é¢\n      console.log(\"ğŸ“ è°ƒç”¨ eth_getBalance...\");\n      const balanceHex = await provider.request({\n        method: 'eth_getBalance',\n        params: [state.address, 'latest'],\n      });\n\n      console.log(\"ğŸ“‹ ä½™é¢åŸå§‹å“åº”:\", { balanceHex, type: typeof balanceHex });\n\n      if (typeof balanceHex === 'string') {\n        // å°†åå…­è¿›åˆ¶ä½™é¢è½¬æ¢ä¸º ETH\n        const balanceWei = BigInt(balanceHex);\n        const balanceEth = formatEther(balanceWei);\n        const formattedBalance = parseFloat(balanceEth).toFixed(4);\n\n        console.log(`ğŸ’° ä½™é¢è®¡ç®—è¯¦æƒ…:`, {\n          hex: balanceHex,\n          wei: balanceWei.toString(),\n          eth: balanceEth,\n          formatted: formattedBalance\n        });\n\n        setState(prev => ({\n          ...prev,\n          balance: formattedBalance,\n        }));\n\n        console.log(`âœ… ä½™é¢æ›´æ–°æˆåŠŸ: ${formattedBalance} ETH`);\n      } else {\n        console.error(\"âŒ ä½™é¢å“åº”ç±»å‹é”™è¯¯:\", typeof balanceHex, balanceHex);\n      }\n    } catch (error) {\n      console.error('âŒ è·å–ä½™é¢å¤±è´¥:', error);\n      console.error('ğŸ” é”™è¯¯è¯¦æƒ…:', {\n        message: error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯',\n        stack: error instanceof Error ? error.stack : undefined,\n        walletId: currentWalletId,\n        address: state.address,\n        chainId: state.chainId\n      });\n      setState(prev => ({\n        ...prev,\n        balance: \"0.0000\",\n      }));\n    } finally {\n      setBalanceLoading(false);\n    }\n  }, [state.isConnected, state.address, state.chainId, walletManager, currentWalletId]);\n\n  // è‡ªåŠ¨è·å–ä½™é¢\n  useEffect(() => {\n    if (state.isConnected && state.address) {\n      fetchBalance();\n\n      // è®¾ç½®å®šæ—¶åˆ·æ–°ä½™é¢ (30ç§’)\n      const interval = setInterval(fetchBalance, 30000);\n      return () => clearInterval(interval);\n    }\n  }, [state.isConnected, state.address, fetchBalance]);\n\n  // è·å–ä»£å¸ä½™é¢çš„æ–¹æ³•\n  const getTokenBalance = useCallback(\n    async (tokenAddress: Address): Promise<TokenBalance> => {\n      // é»˜è®¤è¿”å›å€¼\n      const defaultResult = {\n        balance: \"0\",\n        decimals: 18,\n        symbol: \"\",\n        loading: false,\n        error: null as string | null,\n      };\n\n      // å¦‚æœé’±åŒ…æœªè¿æ¥æˆ–åœ°å€ä¸ºç©ºï¼Œè¿”å›é»˜è®¤å€¼\n      if (!state.isConnected || !state.address) {\n        return { ...defaultResult, error: \"é’±åŒ…æœªè¿æ¥\" };\n      }\n\n      const currentWallet = walletManager?.getWalletById(currentWalletId);\n      if (!currentWallet) {\n        return { ...defaultResult, error: \"æœªæ‰¾åˆ°å½“å‰è¿æ¥çš„é’±åŒ…\" };\n      }\n\n      try {\n        // è®¾ç½®åŠ è½½çŠ¶æ€\n        const loadingResult = { ...defaultResult, loading: true };\n\n        // æ£€æŸ¥ç¼“å­˜\n        const cacheKey = `${tokenAddress.toLowerCase()}-${state.address.toLowerCase()}`;\n        const cachedData = tokenBalanceCache[cacheKey];\n        const now = Date.now();\n\n        // å¦‚æœç¼“å­˜å­˜åœ¨ä¸”æœªè¿‡æœŸï¼ˆ30ç§’å†…ï¼‰ï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜\n        if (cachedData && now - cachedData.lastUpdated < 30000) {\n          return {\n            balance: cachedData.balance,\n            decimals: cachedData.decimals,\n            symbol: cachedData.symbol,\n            loading: false,\n            error: null,\n          };\n        }\n\n        const provider = currentWallet.provider;\n\n        // ERC-20 åˆçº¦çš„å‡½æ•°é€‰æ‹©å™¨\n        const balanceOfSelector = '0x70a08231'; // balanceOf(address)\n        const decimalsSelector = '0x313ce567'; // decimals()\n        const symbolSelector = '0x95d89b41'; // symbol()\n\n        // ç¼–ç åœ°å€å‚æ•° (å»æ‰0xå‰ç¼€ï¼Œè¡¥é½åˆ°64ä½)\n        const encodedAddress = state.address.slice(2).padStart(64, '0');\n\n        // å¹¶è¡Œè°ƒç”¨åˆçº¦æ–¹æ³•\n        const [balanceResult, decimalsResult, symbolResult] = await Promise.all([\n          // è·å–ä½™é¢\n          provider.request({\n            method: 'eth_call',\n            params: [\n              {\n                to: tokenAddress,\n                data: balanceOfSelector + encodedAddress,\n              },\n              'latest',\n            ],\n          }),\n          // è·å–å°æ•°ä½æ•°\n          provider.request({\n            method: 'eth_call',\n            params: [\n              {\n                to: tokenAddress,\n                data: decimalsSelector,\n              },\n              'latest',\n            ],\n          }),\n          // è·å–ä»£å¸ç¬¦å·\n          provider.request({\n            method: 'eth_call',\n            params: [\n              {\n                to: tokenAddress,\n                data: symbolSelector,\n              },\n              'latest',\n            ],\n          }),\n        ]);\n\n        // è§£æç»“æœ\n        const decimals = parseInt(decimalsResult as string, 16);\n        const balanceWei = BigInt(balanceResult as string);\n        const balance = formatUnits(balanceWei, decimals);\n\n        // è§£æç¬¦å· (å»æ‰å‰é¢çš„0xå’Œå¡«å……ï¼Œç„¶åè½¬æ¢ä¸ºå­—ç¬¦ä¸²)\n        let symbol = '';\n        if (symbolResult && typeof symbolResult === 'string') {\n          const symbolHex = (symbolResult as string).slice(2);\n          // è½¬æ¢åå…­è¿›åˆ¶åˆ°å­—ç¬¦ä¸²\n          let symbolStr = '';\n          for (let i = 0; i < symbolHex.length; i += 2) {\n            const charCode = parseInt(symbolHex.substr(i, 2), 16);\n            if (charCode !== 0) {\n              symbolStr += String.fromCharCode(charCode);\n            }\n          }\n          symbol = symbolStr.trim();\n        }\n\n        // æ›´æ–°ç¼“å­˜\n        setTokenBalanceCache((prev) => ({\n          ...prev,\n          [cacheKey]: {\n            balance,\n            decimals,\n            symbol: symbol || 'TOKEN',\n            lastUpdated: now,\n          },\n        }));\n\n        // è¿”å›ç»“æœ\n        return {\n          balance,\n          decimals,\n          symbol: symbol || 'TOKEN',\n          loading: false,\n          error: null,\n        };\n      } catch (error) {\n        console.error(`è·å–ä»£å¸ ${tokenAddress} ä½™é¢å¤±è´¥:`, error);\n        return {\n          ...defaultResult,\n          error: error instanceof Error ? error.message : \"è·å–ä»£å¸ä½™é¢å¤±è´¥\",\n        };\n      }\n    },\n    [state.isConnected, state.address, walletManager, currentWalletId, tokenBalanceCache]\n  );\n\n  // è‡ªåŠ¨è¿æ¥é€»è¾‘\n  useEffect(() => {\n    const attemptAutoConnect = async () => {\n      if (autoConnectAttempted || !autoConnect || !walletManager || walletsLoading) {\n        return;\n      }\n\n      if (state.isConnected) {\n        setAutoConnectAttempted(true);\n        return;\n      }\n\n      const lastConnectedWallet = typeof window !== 'undefined' && config.storage\n        ? config.storage.getItem('lastConnectedWallet')\n        : null;\n\n      if (!lastConnectedWallet) {\n        setAutoConnectAttempted(true);\n        return;\n      }\n\n      console.log(\"ğŸ”„ å°è¯•è‡ªåŠ¨è¿æ¥:\", lastConnectedWallet);\n\n      try {\n        // æ£€æŸ¥è¯¥é’±åŒ…æ˜¯å¦è¿˜å­˜åœ¨\n        const availableWallets = walletManager.getAvailableWallets();\n        const walletExists = availableWallets.some(wallet => wallet.id === lastConnectedWallet);\n\n        if (walletExists) {\n          await connect(lastConnectedWallet);\n        } else {\n          console.log(\"ğŸ”„ ä¸Šæ¬¡è¿æ¥çš„é’±åŒ…ä¸å­˜åœ¨ï¼Œæ¸…ç†å­˜å‚¨\");\n          if (typeof window !== 'undefined' && config.storage) {\n            config.storage.removeItem('lastConnectedWallet');\n            config.storage.removeItem('walletAddress');\n            config.storage.removeItem('lastConnectionTime');\n          }\n        }\n      } catch (error) {\n        console.warn(\"è‡ªåŠ¨è¿æ¥å¤±è´¥:\", error);\n        if (typeof window !== 'undefined' && config.storage) {\n          config.storage.removeItem('lastConnectedWallet');\n          config.storage.removeItem('walletAddress');\n          config.storage.removeItem('lastConnectionTime');\n        }\n      } finally {\n        setAutoConnectAttempted(true);\n      }\n    };\n\n    attemptAutoConnect();\n  }, [\n    autoConnect,\n    autoConnectAttempted,\n    walletManager,\n    walletsLoading,\n    state.isConnected,\n    config.storage,\n    connect\n  ]);\n\n  // æ¨¡æ€æ¡†æ§åˆ¶\n  const openModal = useCallback(() => setIsModalOpen(true), []);\n  const closeModal = useCallback(() => setIsModalOpen(false), []);\n\n  const value: WalletContextValue = {\n    ...state,\n    connect,\n    disconnect,\n    switchChain,\n    openModal,\n    closeModal,\n    walletInstances,\n    detectedWallets,\n    walletsLoading,\n    fetchBalance,\n    balanceLoading,\n    getTokenBalance,\n  };\n\n  return (\n    <WalletContext.Provider value={value}>\n      {children}\n      <WalletModal\n        isOpen={isModalOpen}\n        onClose={closeModal}\n        onConnect={connect}\n        title=\"è¿æ¥é’±åŒ…\"\n        description=\"è¯·é€‰æ‹©è¦è¿æ¥çš„é’±åŒ…\"\n        walletInstances={walletInstances}\n        detectedWallets={detectedWallets}\n        walletsLoading={walletsLoading}\n      />\n    </WalletContext.Provider>\n  );\n};\n\nexport const useWallet = (): WalletContextValue => {\n  const context = useContext(WalletContext);\n  if (!context) {\n    throw new Error('useWallet must be used within a WalletProvider');\n  }\n  return context;\n};","import { DetectedWallet, ExtendedWalletInfo } from '../types';\n\nexport interface DeduplicationResult {\n  filtered: DetectedWallet[];\n  staticFiltered: { [groupName: string]: ExtendedWalletInfo[] };\n}\n\nexport class WalletDeduplicator {\n  /**\n   * é’±åŒ…å»é‡å‡½æ•°\n   * @param detected æ£€æµ‹åˆ°çš„é’±åŒ…åˆ—è¡¨\n   * @param configuredWallets é…ç½®çš„é’±åŒ…ç»„\n   * @returns å»é‡åçš„ç»“æœ\n   */\n  static deduplicate(\n    detected: DetectedWallet[] | undefined,\n    configuredWallets: { [groupName: string]: ExtendedWalletInfo[] } | undefined\n  ): DeduplicationResult {\n    console.log(\"ğŸ” å¼€å§‹é’±åŒ…å»é‡...\", detected, configuredWallets);\n\n    // ç¡®ä¿ detected å’Œ configuredWallets æ˜¯æœ‰æ•ˆçš„\n    const safeDetected = detected || [];\n    const safeConfigured = configuredWallets || {};\n\n    console.log(\n      \"æ£€æµ‹åˆ°çš„é’±åŒ…:\",\n      safeDetected.length > 0\n        ? safeDetected.map((w) => ({ name: w.name, id: w.id, rdns: w.rdns }))\n        : \"æ²¡æœ‰æ£€æµ‹åˆ°é’±åŒ…\"\n    );\n\n    const nameMap = new Map<string, DetectedWallet>();\n    const rdnsMap = new Map<string, DetectedWallet>();\n\n    // ä¼˜å…ˆä¿ç•™ EIP-6963 æ ‡å‡†çš„é’±åŒ…\n    const sortedDetected = [...safeDetected].sort((a, b) => {\n      if (a.type === \"eip6963\" && b.type !== \"eip6963\") return -1;\n      if (b.type === \"eip6963\" && a.type !== \"eip6963\") return 1;\n      return 0;\n    });\n\n    console.log(\"deduplicateDetectedWallets\", sortedDetected, nameMap, rdnsMap);\n\n    // å»é‡æ£€æµ‹åˆ°çš„é’±åŒ…\n    const filteredDetected = this.deduplicateDetectedWallets(\n      sortedDetected,\n      nameMap,\n      rdnsMap\n    );\n\n    // è¿‡æ»¤é…ç½®çš„é’±åŒ…\n    const staticFiltered = this.filterConfiguredWallets(\n      safeConfigured,\n      filteredDetected\n    );\n\n    console.log(\"âœ… å»é‡å®Œæˆ\");\n    console.log(\"æœ€ç»ˆæ£€æµ‹é’±åŒ…æ•°é‡:\", filteredDetected.length);\n    console.log(\"æœ€ç»ˆé…ç½®é’±åŒ…ç»„æ•°:\", Object.keys(staticFiltered).length);\n\n    return {\n      filtered: filteredDetected,\n      staticFiltered,\n    };\n  }\n\n  private static deduplicateDetectedWallets(\n    sortedDetected: DetectedWallet[],\n    nameMap: Map<string, DetectedWallet>,\n    rdnsMap: Map<string, DetectedWallet>\n  ): DetectedWallet[] {\n    const filteredDetected: DetectedWallet[] = [];\n\n    // ç¡®ä¿ sortedDetected æ˜¯æ•°ç»„ä¸”ä¸ä¸ºç©º\n    if (!Array.isArray(sortedDetected)) {\n      console.warn(\"âš ï¸ sortedDetected ä¸æ˜¯æ•°ç»„ï¼Œè¿”å›ç©ºç»“æœ\");\n      return filteredDetected;\n    }\n\n    if (sortedDetected.length === 0) {\n      console.log(\"âš ï¸ æ²¡æœ‰æ£€æµ‹åˆ°é’±åŒ…ï¼Œè¿”å›ç©ºç»“æœ\");\n      return filteredDetected;\n    }\n\n    for (const wallet of sortedDetected) {\n      const normalizedName = wallet.name.toLowerCase().trim();\n      const existingByName = nameMap.get(normalizedName);\n      const existingByRdns = rdnsMap.get(wallet.rdns);\n\n      if (!existingByName && !existingByRdns) {\n        // æ²¡æœ‰é‡å¤ï¼Œæ·»åŠ åˆ°ç»“æœä¸­\n        filteredDetected.push(wallet);\n        nameMap.set(normalizedName, wallet);\n        rdnsMap.set(wallet.rdns, wallet);\n        console.log(\n          `âœ… ä¿ç•™é’±åŒ…: ${wallet.name} (${wallet.rdns}) [${wallet.type}]`\n        );\n      } else {\n        // æœ‰é‡å¤ï¼Œä¼˜å…ˆä¿ç•™ EIP-6963 æ ‡å‡†çš„\n        const existing = existingByName || existingByRdns;\n        if (\n          existing &&\n          wallet.type === \"eip6963\" &&\n          existing.type !== \"eip6963\"\n        ) {\n          // æ›¿æ¢ä¸º EIP-6963 ç‰ˆæœ¬\n          const index = filteredDetected.findIndex(\n            (w) => w.rdns === existing.rdns\n          );\n          if (index !== -1) {\n            filteredDetected[index] = wallet;\n            nameMap.set(normalizedName, wallet);\n            rdnsMap.set(wallet.rdns, wallet);\n            console.log(\n              `ğŸ”„ æ›¿æ¢é’±åŒ…: ${existing.name} -> ${wallet.name} (æ›´å¥½çš„æ ‡å‡†)`\n            );\n          }\n        } else {\n          console.log(\n            `âŒ è·³è¿‡é‡å¤é’±åŒ…: ${wallet.name} (${wallet.rdns}) [${wallet.type}]`\n          );\n        }\n      }\n    }\n\n    return filteredDetected;\n  }\n\n  private static filterConfiguredWallets(\n    configuredWallets: { [groupName: string]: ExtendedWalletInfo[] },\n    detectedWallets: DetectedWallet[]\n  ): { [groupName: string]: ExtendedWalletInfo[] } {\n    const staticFiltered: { [groupName: string]: ExtendedWalletInfo[] } = {};\n\n    // å¦‚æœæ²¡æœ‰æ£€æµ‹åˆ°é’±åŒ…ï¼Œç›´æ¥è¿”å›åŸå§‹é…ç½®\n    if (detectedWallets.length === 0) {\n      console.log(\"âš ï¸ æ²¡æœ‰æ£€æµ‹åˆ°é’±åŒ…ï¼Œè¿”å›åŸå§‹é…ç½®é’±åŒ…\");\n      return configuredWallets;\n    }\n\n    const detectedNames = new Set(\n      detectedWallets.map((w) => w.name.toLowerCase().trim())\n    );\n    const detectedIds = new Set(\n      detectedWallets.map((w) => w.id.toLowerCase())\n    );\n\n    Object.entries(configuredWallets).forEach(([groupName, walletsInGroup]) => {\n      const filtered = walletsInGroup.filter((wallet) => {\n        const normalizedName = wallet.name.toLowerCase().trim();\n        const normalizedId = wallet.id.toLowerCase();\n\n        const isDuplicate =\n          detectedNames.has(normalizedName) || detectedIds.has(normalizedId);\n\n        if (isDuplicate) {\n          console.log(`ğŸš« è¿‡æ»¤é…ç½®é’±åŒ…: ${wallet.name} (ä¸æ£€æµ‹åˆ°çš„é’±åŒ…é‡å¤)`);\n          return false;\n        }\n\n        return true;\n      });\n\n      if (filtered.length > 0) {\n        staticFiltered[groupName] = filtered;\n      }\n    });\n\n    return staticFiltered;\n  }\n}","\"use client\";\n\nimport React, { useState } from 'react';\nimport { WalletModalProps, ExtendedWalletInfo, DetectedWallet } from '../types';\n\nconst WalletModal: React.FC<WalletModalProps> = ({\n  isOpen,\n  onClose,\n  onConnect,\n  title = 'è¿æ¥é’±åŒ…',\n  description = 'è¯·é€‰æ‹©è¦è¿æ¥çš„é’±åŒ…',\n  theme = 'light',\n  walletInstances = {},\n  detectedWallets = [],\n  walletsLoading = false,\n}) => {\n  const [connectingWallet, setConnectingWallet] = useState<string | null>(null);\n  const [isGridLayout, setIsGridLayout] = useState(true);\n\n  // åˆå¹¶æ‰€æœ‰å¯ç”¨çš„é’±åŒ…ï¼ˆWalletProviderå·²ç»å¤„ç†äº†å»é‡ï¼‰\n  const allWallets: ExtendedWalletInfo[] = [];\n\n  console.log('ğŸ” WalletModal - å¼€å§‹å¤„ç†é’±åŒ…ï¼Œè¯¦ç»†è°ƒè¯•ä¿¡æ¯:');\n  console.log('ğŸ“‹ walletInstances:', walletInstances);\n  console.log('ğŸ“‹ detectedWallets:', detectedWallets);\n\n  // æ·»åŠ é…ç½®çš„é’±åŒ…å®ä¾‹ï¼ˆè¿™äº›å·²ç»ç»è¿‡å»é‡å¤„ç†ï¼‰\n  Object.entries(walletInstances).forEach(([groupName, walletGroup]) => {\n    console.log(`  ğŸ·ï¸ ç»„å: ${groupName}, é’±åŒ…æ•°é‡: ${walletGroup.length}`);\n    walletGroup.forEach(wallet => {\n      console.log(`    ğŸªª é’±åŒ…: ${wallet.name} (${wallet.id}) - å·²å®‰è£…: ${wallet.installed}`);\n    });\n    allWallets.push(...walletGroup);\n  });\n\n  console.log('ğŸ“¦ WalletModal åˆå¹¶åçš„æ‰€æœ‰é’±åŒ…æ•°é‡:', allWallets.length);\n  console.log('ğŸ“¦ WalletModal åˆå¹¶åçš„æ‰€æœ‰é’±åŒ…:', allWallets.map(w => ({name: w.name, id: w.id, installed: w.installed})));\n\n  // åªæ˜¾ç¤ºå·²å®‰è£…çš„é’±åŒ…\n  const installedWallets = allWallets.filter(wallet => wallet.installed);\n  console.log('ğŸ“¦ WalletModal å·²å®‰è£…é’±åŒ…æ•°é‡:', installedWallets.length);\n  console.log('ğŸ“¦ WalletModal å·²å®‰è£…é’±åŒ…:', installedWallets.map(w => ({name: w.name, id: w.id, installed: w.installed})));\n\n  const handleWalletSelect = async (walletId: string) => {\n    console.log('ğŸš€ ç”¨æˆ·é€‰æ‹©é’±åŒ…:', walletId);\n    console.log('ğŸ” WalletModal - å¼€å§‹è¿æ¥é’±åŒ…ï¼Œè¯¦ç»†ä¿¡æ¯:');\n    console.log('  ğŸªª é’±åŒ…ID:', walletId);\n\n    // æŸ¥æ‰¾é€‰ä¸­çš„é’±åŒ…ä¿¡æ¯\n    const selectedWallet = installedWallets.find(wallet => wallet.id === walletId);\n    console.log('  ğŸ” æ‰¾åˆ°çš„é’±åŒ…ä¿¡æ¯:', selectedWallet);\n\n    if (!selectedWallet) {\n      console.error('âŒ æœªæ‰¾åˆ°é€‰ä¸­çš„é’±åŒ…:', walletId);\n      return;\n    }\n\n    setConnectingWallet(walletId);\n\n    try {\n      console.log('  ğŸ”Œ è°ƒç”¨ onConnectï¼Œå‚æ•°:', walletId);\n      const result = await onConnect(walletId);\n      console.log('  âœ… onConnect è¿”å›ç»“æœ:', result);\n\n      // è¿æ¥æˆåŠŸæˆ–å¤±è´¥åéƒ½å…³é—­å¼¹çª—\n      if (result.success) {\n        console.log('âœ… é’±åŒ…è¿æ¥æˆåŠŸï¼Œå…³é—­å¼¹çª—');\n      } else {\n        console.log('âŒ é’±åŒ…è¿æ¥å¤±è´¥:', result.error);\n      }\n\n      // æ— è®ºæˆåŠŸä¸å¦éƒ½å…³é—­å¼¹çª—\n      onClose();\n    } catch (error) {\n      console.error('âŒ è¿æ¥é’±åŒ…è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯:', error);\n      console.error('  ğŸ“‹ é”™è¯¯è¯¦æƒ…:', {\n        message: error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯',\n        stack: error instanceof Error ? error.stack : undefined,\n        walletId,\n        selectedWallet: selectedWallet.name\n      });\n      // å‘ç”Ÿé”™è¯¯æ—¶ä¹Ÿå…³é—­å¼¹çª—\n      onClose();\n    } finally {\n      setConnectingWallet(null);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  const themeClasses = {\n    light: {\n      background: 'bg-white',\n      border: 'border-gray-200',\n      text: 'text-gray-900',\n      secondaryText: 'text-gray-600',\n      hover: 'hover:bg-gray-50',\n      button: 'bg-blue-600 hover:bg-blue-700 text-white',\n      cancelButton: 'bg-gray-200 hover:bg-gray-300 text-gray-900',\n    },\n    dark: {\n      background: 'bg-gray-800',\n      border: 'border-gray-700',\n      text: 'text-gray-100',\n      secondaryText: 'text-gray-400',\n      hover: 'hover:bg-gray-700',\n      button: 'bg-blue-600 hover:bg-blue-700 text-white',\n      cancelButton: 'bg-gray-700 hover:bg-gray-600 text-gray-100',\n    },\n  };\n\n  const classes = themeClasses[theme];\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\n      <div className={`w-full max-w-2xl mx-4 rounded-lg border ${classes.background} ${classes.border}`}>\n        {/* å¤´éƒ¨ */}\n        <div className=\"p-6 border-b border-gray-200 dark:border-gray-700\">\n          <div className=\"flex justify-between items-center mb-4\">\n            <h2 className={`text-xl font-semibold ${classes.text}`}>{title}</h2>\n            <div className=\"flex space-x-2\">\n              <button\n                onClick={() => setIsGridLayout(true)}\n                className={`p-2 rounded ${isGridLayout ? 'bg-blue-100 text-blue-600' : 'text-gray-400 hover:text-gray-600'}`}\n                title=\"ç½‘æ ¼è§†å›¾\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path d=\"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z\" />\n                </svg>\n              </button>\n              <button\n                onClick={() => setIsGridLayout(false)}\n                className={`p-2 rounded ${!isGridLayout ? 'bg-blue-100 text-blue-600' : 'text-gray-400 hover:text-gray-600'}`}\n                title=\"åˆ—è¡¨è§†å›¾\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z\" clipRule=\"evenodd\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n          <p className={`${classes.secondaryText}`}>{description}</p>\n        </div>\n\n        {/* é’±åŒ…åˆ—è¡¨ */}\n        <div className=\"p-6 max-h-96 overflow-y-auto\">\n          {walletsLoading ? (\n            <div className={`text-center ${classes.secondaryText}`}>\n              <svg className=\"animate-spin h-8 w-8 mx-auto mb-2\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n              </svg>\n              æ£€æµ‹é’±åŒ…ä¸­...\n            </div>\n          ) : installedWallets.length === 0 ? (\n            <div className={`text-center ${classes.secondaryText}`}>\n              æ²¡æœ‰æ‰¾åˆ°å·²å®‰è£…çš„é’±åŒ…ï¼Œè¯·å®‰è£…é’±åŒ…æ‰©å±•ç¨‹åº\n            </div>\n          ) : (\n            <div className={isGridLayout ? 'grid grid-cols-2 gap-4' : 'space-y-3'}>\n              {installedWallets.map((wallet) => {\n                const iconSrc = typeof wallet.iconUrl === 'string'\n                  ? wallet.iconUrl\n                  : wallet.icon;\n                return (\n                  <button\n                    key={wallet.id}\n                    onClick={() => handleWalletSelect(wallet.id)}\n                    disabled={connectingWallet === wallet.id}\n                    className={`\n                      w-full p-5 rounded-lg border transition-all duration-200\n                      ${classes.border} ${classes.hover}\n                      ${connectingWallet === wallet.id ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}\n                      flex flex-col items-center justify-center text-center min-h-[130px]\n                      hover:shadow-md\n                    `}\n                  >\n                    {iconSrc && (\n                      <div className=\"w-16 h-16 mb-3 flex items-center justify-center\">\n                        <img\n                          src={iconSrc}\n                          alt={wallet.name}\n                          className=\"w-full h-full object-contain\"\n                          onError={(e) => {\n                            e.currentTarget.style.display = 'none';\n                          }}\n                        />\n                      </div>\n                    )}\n                    <div className={`font-medium text-base ${classes.text} mb-1`}>{wallet.name}</div>\n                    {wallet.installed && (\n                      <div className={`text-sm ${classes.secondaryText}`}>\n                        å·²å®‰è£…\n                      </div>\n                    )}\n                    {connectingWallet === wallet.id && (\n                      <div className=\"mt-3\">\n                        <svg className=\"animate-spin h-5 w-5 text-blue-600\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                          <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                          <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                        </svg>\n                      </div>\n                    )}\n                  </button>\n                );\n              })}\n            </div>\n          )}\n        </div>\n\n        {/* åº•éƒ¨ */}\n        <div className=\"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end\">\n          <button\n            onClick={onClose}\n            className={`px-4 py-2 rounded-lg ${classes.cancelButton}`}\n          >\n            å–æ¶ˆ\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WalletModal;","\"use client\";\n\nimport React from 'react';\nimport { useWallet } from './WalletProvider';\nimport { ConnectButtonProps } from '../types';\n\nconst ConnectButton: React.FC<ConnectButtonProps> = ({\n  label,\n  size = 'md',\n  variant = 'primary',\n  className = '',\n  showBalance = false,\n  showChain = false,\n  onConnect,\n  onDisconnect,\n}) => {\n  const {\n    isConnected,\n    isConnecting,\n    address,\n    balance,\n    chainId,\n    wallet,\n    connect,\n    disconnect,\n    openModal,\n    closeModal,\n    walletInstances,\n    detectedWallets,\n  } = useWallet();\n\n  const getButtonClasses = () => {\n    const baseClasses = 'font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors';\n\n    const variantClasses = {\n      primary: 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500',\n      secondary: 'bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-300',\n      outline: 'bg-transparent border border-blue-600 text-blue-600 hover:bg-blue-50 focus:ring-blue-500',\n      ghost: 'bg-transparent text-blue-600 hover:bg-blue-50 focus:ring-blue-500',\n    };\n\n    const sizeClasses = {\n      sm: 'py-1 px-3 text-sm',\n      md: 'py-2 px-4 text-base',\n      lg: 'py-3 px-6 text-lg',\n    };\n\n    return `${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`;\n  };\n\n  const handleConnect = async () => {\n    try {\n      console.log('ğŸ” ConnectButton - å¼€å§‹è¿æ¥ï¼Œè¯¦ç»†è°ƒè¯•ä¿¡æ¯:');\n      console.log('ğŸ“‹ walletInstances:', walletInstances);\n      console.log('ğŸ“‹ detectedWallets:', detectedWallets);\n\n      // ä½¿ç”¨å·²ç»å»é‡çš„é’±åŒ…å®ä¾‹ï¼ˆWalletProviderå·²å¤„ç†å»é‡ï¼‰\n      const allWallets: any[] = [];\n\n      // åªä½¿ç”¨é’±åŒ…å®ä¾‹ä¸­çš„é’±åŒ…ï¼ˆå·²å»é‡ï¼‰\n      if (walletInstances) {\n        console.log('ğŸ”„ å¤„ç†é’±åŒ…å®ä¾‹ç»„:');\n        Object.entries(walletInstances).forEach(([groupName, walletGroup]) => {\n          console.log(`  ğŸ·ï¸ ç»„å: ${groupName}, é’±åŒ…æ•°é‡: ${walletGroup.length}`);\n          walletGroup.forEach(wallet => {\n            console.log(`    ğŸªª é’±åŒ…: ${wallet.name} (${wallet.id}) - å·²å®‰è£…: ${wallet.installed}`);\n          });\n          allWallets.push(...walletGroup);\n        });\n      }\n\n      console.log('ğŸ“¦ åˆå¹¶åçš„æ‰€æœ‰é’±åŒ…æ•°é‡:', allWallets.length);\n      console.log('ğŸ“¦ åˆå¹¶åçš„æ‰€æœ‰é’±åŒ…:', allWallets.map(w => ({name: w.name, id: w.id, installed: w.installed})));\n\n      if (allWallets.length === 0) {\n        console.warn('æ²¡æœ‰æ‰¾åˆ°å¯ç”¨çš„é’±åŒ…ï¼Œè¯·å®‰è£…é’±åŒ…æ‰©å±•ç¨‹åº');\n        return;\n      }\n\n      // è·å–å·²å®‰è£…çš„é’±åŒ…\n      const installedWallets = allWallets.filter(wallet => wallet.installed);\n\n      if (installedWallets.length === 0) {\n        console.warn('æ²¡æœ‰å·²å®‰è£…çš„é’±åŒ…ï¼Œè¯·å…ˆå®‰è£…é’±åŒ…æ‰©å±•ç¨‹åº');\n        return;\n      }\n\n      // å¦‚æœåªæœ‰ä¸€ä¸ªå·²å®‰è£…çš„é’±åŒ…ï¼Œç›´æ¥è¿æ¥\n      if (installedWallets.length === 1) {\n        console.log('ğŸš€ å¼€å§‹è¿æ¥é’±åŒ…:', installedWallets[0].name);\n        const result = await connect(installedWallets[0].id);\n        if (onConnect) {\n          onConnect(result);\n        }\n\n        // è¿æ¥æˆåŠŸåå…³é—­å¼¹çª—ï¼ˆå¦‚æœæ‰“å¼€çš„è¯ï¼‰\n        if (result.success) {\n          closeModal();\n        }\n      } else {\n        // å¤šä¸ªå·²å®‰è£…çš„é’±åŒ…ï¼Œæ‰“å¼€é€‰æ‹©å¼¹çª—\n        console.log('ğŸ“± æ‰“å¼€é’±åŒ…é€‰æ‹©å¼¹çª—ï¼Œå¯ç”¨çš„é’±åŒ…:', installedWallets.map(w => w.name));\n        openModal();\n      }\n    } catch (error) {\n      console.error('âŒ è¿æ¥é’±åŒ…å¤±è´¥:', error);\n\n      // é”™è¯¯å¤„ç†ï¼šå¦‚æœæ˜¯ç”¨æˆ·æ‹’ç»ï¼Œæä¾›æ›´å‹å¥½çš„æç¤º\n      if (error instanceof Error) {\n        const errorMessage = error.message.toLowerCase();\n        if (\n          errorMessage.includes('user rejected') ||\n          errorMessage.includes('user denied') ||\n          errorMessage.includes('user cancelled') ||\n          errorMessage.includes('æ‹’ç»') ||\n          errorMessage.includes('å–æ¶ˆ')\n        ) {\n          console.log('â„¹ï¸ ç”¨æˆ·æ‹’ç»äº†é’±åŒ…æˆæƒè¯·æ±‚');\n        }\n      }\n    }\n  };\n\n  const handleDisconnect = async () => {\n    try {\n      console.log('ğŸ”Œ å¼€å§‹æ–­å¼€é’±åŒ…è¿æ¥');\n      await disconnect();\n      console.log('âœ… é’±åŒ…å·²æ–­å¼€è¿æ¥');\n\n      if (onDisconnect) {\n        onDisconnect();\n      }\n    } catch (error) {\n      console.error('âŒ æ–­å¼€è¿æ¥å¤±è´¥:', error);\n    }\n  };\n\n  // æ ¼å¼åŒ–åœ°å€æ˜¾ç¤º\n  const formatAddress = (address: string | null) => {\n    if (!address) return '';\n    return `${address.slice(0, 6)}...${address.slice(-4)}`;\n  };\n\n  // è·å–é“¾åç§°\n  const getChainName = (chainId: number | null) => {\n    if (!chainId) return 'Unknown Chain';\n\n    const chainMap: Record<number, string> = {\n      1: 'Ethereum',\n      56: 'BSC',\n      137: 'Polygon',\n      43114: 'Avalanche',\n      42161: 'Arbitrum',\n      8453: 'Base',\n      11155111: 'Sepolia',\n    };\n\n    return chainMap[chainId] || `Chain ${chainId}`;\n  };\n\n  if (isConnecting) {\n    return (\n      <button className={getButtonClasses()} disabled>\n        <div className=\"flex items-center justify-center\">\n          <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-current\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n          </svg>\n          è¿æ¥ä¸­...\n        </div>\n      </button>\n    );\n  }\n\n  if (!isConnected) {\n    return (\n      <button onClick={handleConnect} className={getButtonClasses()}>\n        {label || 'è¿æ¥é’±åŒ…'}\n      </button>\n    );\n  }\n\n  return (\n    <div className=\"flex items-center gap-3\">\n      {showChain && chainId && (\n        <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n          {getChainName(chainId)}\n        </div>\n      )}\n\n      <button onClick={handleDisconnect} className={getButtonClasses()}>\n        <div className=\"flex items-center\">\n          {wallet?.icon && (\n            <img\n              src={wallet.icon}\n              alt={wallet.name}\n              className=\"w-4 h-4 mr-2 rounded\"\n            />\n          )}\n          {formatAddress(address)}\n        </div>\n      </button>\n\n      {showBalance && (\n        <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n          {parseFloat(balance).toFixed(4)} ETH\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ConnectButton;","\"use client\";\n\nimport React, { useState } from 'react';\nimport { useWallet } from './WalletProvider';\n\ninterface AccountDropdownProps {\n  className?: string;\n  showBalance?: boolean;\n  showChainSwitcher?: boolean;\n  size?: 'sm' | 'md' | 'lg';\n  onDisconnect?: () => void;\n}\n\nconst AccountDropdown: React.FC<AccountDropdownProps> = ({\n  className = '',\n  showBalance = false,\n  showChainSwitcher = true,\n  size = 'md',\n  onDisconnect,\n}) => {\n  const {\n    address,\n    balance,\n    chainId,\n    isConnected,\n    disconnect,\n    switchChain,\n    fetchBalance,\n    balanceLoading,\n  } = useWallet();\n\n  const [isOpen, setIsOpen] = useState(false);\n  const [copied, setCopied] = useState(false);\n  const [switchingChain, setSwitchingChain] = useState<number | null>(null);\n\n  // å¦‚æœæœªè¿æ¥ï¼Œä¸æ˜¾ç¤ºç»„ä»¶\n  if (!isConnected || !address) {\n    return null;\n  }\n\n  // å°ºå¯¸æ ·å¼\n  const sizeClasses = {\n    sm: 'h-8 px-3 text-sm',\n    md: 'h-10 px-4 text-base',\n    lg: 'h-12 px-6 text-lg',\n  };\n\n  // æ ¼å¼åŒ–åœ°å€\n  const formatAddress = (addr: string) => {\n    return `${addr.slice(0, 6)}...${addr.slice(-4)}`;\n  };\n\n  // æ ¼å¼åŒ–ä½™é¢\n  const formatBalance = (bal: string) => {\n    const num = parseFloat(bal);\n    return num.toFixed(4);\n  };\n\n  // è·å–é“¾åç§°\n  const getChainName = (id: number | null) => {\n    const chainNames: Record<number, string> = {\n      1: 'Ethereum',\n      11155111: 'Sepolia',\n      137: 'Polygon',\n      56: 'BSC',\n      42161: 'Arbitrum',\n      10: 'Optimism',\n    };\n    return id ? chainNames[id] || `Chain ${id}` : 'Unknown';\n  };\n\n  // è·å–é“¾å›¾æ ‡\n  const getChainIcon = (id: number | null) => {\n    const chainColors: Record<number, string> = {\n      1: 'bg-blue-500',\n      11155111: 'bg-purple-500',\n      137: 'bg-purple-600',\n      56: 'bg-yellow-500',\n      42161: 'bg-blue-600',\n      10: 'bg-red-500',\n    };\n    return id ? chainColors[id] || 'bg-gray-500' : 'bg-gray-500';\n  };\n\n  // å¤åˆ¶åœ°å€\n  const copyAddress = async () => {\n    if (address && navigator.clipboard) {\n      try {\n        await navigator.clipboard.writeText(address);\n        setCopied(true);\n        setTimeout(() => setCopied(false), 2000);\n      } catch (error) {\n        console.error('å¤åˆ¶åœ°å€å¤±è´¥:', error);\n      }\n    }\n  };\n\n  // å¤„ç†æ–­å¼€è¿æ¥\n  const handleDisconnect = async () => {\n    try {\n      await disconnect();\n      setIsOpen(false);\n      if (onDisconnect) {\n        onDisconnect();\n      }\n    } catch (error) {\n      console.error('æ–­å¼€è¿æ¥å¤±è´¥:', error);\n    }\n  };\n\n  // å¤„ç†åˆ‡æ¢é“¾\n  const handleSwitchChain = async (newChainId: number) => {\n    if (newChainId === chainId) return;\n\n    try {\n      setSwitchingChain(newChainId);\n      await switchChain(newChainId);\n      setIsOpen(false);\n    } catch (error) {\n      console.error('åˆ‡æ¢é“¾å¤±è´¥:', error);\n    } finally {\n      setSwitchingChain(null);\n    }\n  };\n\n  // æ”¯æŒçš„é“¾åˆ—è¡¨\n  const supportedChains = [\n    { id: 1, name: 'Ethereum', shortName: 'ETH' },\n    { id: 11155111, name: 'Sepolia Testnet', shortName: 'Sepolia' },\n    { id: 137, name: 'Polygon', shortName: 'MATIC' },\n    { id: 56, name: 'BNB Smart Chain', shortName: 'BSC' },\n    { id: 42161, name: 'Arbitrum One', shortName: 'ARB' },\n    { id: 10, name: 'Optimism', shortName: 'OP' },\n  ];\n\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className={`\n          inline-flex items-center justify-center rounded-lg border border-gray-300\n          bg-white hover:bg-gray-50 text-gray-900 font-medium\n          transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\n          ${sizeClasses[size]} ${className}\n        `}\n      >\n        <div className=\"flex items-center space-x-2\">\n          {/* è¿æ¥çŠ¶æ€æŒ‡ç¤ºå™¨ */}\n          <div className={`w-2 h-2 rounded-full ${getChainIcon(chainId)}`}></div>\n\n          {/* åœ°å€ */}\n          <span className=\"font-mono\">{formatAddress(address)}</span>\n\n          {/* ä½™é¢ */}\n          {showBalance && balance && (\n            <span className=\"text-sm text-gray-900 font-medium\">{formatBalance(balance)} ETH</span>\n          )}\n\n          {/* ä¸‹æ‹‰ç®­å¤´ */}\n          <svg\n            className={`w-4 h-4 transition-transform text-gray-400 ${isOpen ? 'rotate-180' : ''}`}\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n          >\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n          </svg>\n        </div>\n      </button>\n\n      {/* ä¸‹æ‹‰èœå• */}\n      {isOpen && (\n        <div className=\"absolute right-0 mt-2 w-72 bg-white rounded-lg shadow-lg border border-gray-200 z-50\">\n          {/* è´¦æˆ·ä¿¡æ¯å¤´éƒ¨ */}\n          <div className=\"p-4 border-b border-gray-100\">\n            <div className=\"flex items-center space-x-3 mb-3\">\n              <div className={`w-3 h-3 rounded-full ${getChainIcon(chainId)}`}></div>\n              <div className=\"flex-1\">\n                <div className=\"font-medium text-gray-900\">å·²è¿æ¥</div>\n                <div className=\"text-sm text-gray-600\">{getChainName(chainId)}</div>\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <div className=\"text-sm text-gray-600 font-mono break-all\">\n                {address}\n              </div>\n\n              {showBalance && balance && (\n                <div className=\"text-sm text-gray-600\">\n                  ä½™é¢: {formatBalance(balance)} ETH\n                </div>\n              )}\n            </div>\n          </div>\n\n          <div className=\"p-2\">\n            {/* å¤åˆ¶åœ°å€ */}\n            <button\n              onClick={copyAddress}\n              className=\"w-full text-left px-3 py-2 text-sm text-gray-900 hover:bg-gray-50 rounded-md flex items-center space-x-3\"\n            >\n              <svg className=\"w-4 h-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n              </svg>\n              <span>{copied ? 'å·²å¤åˆ¶!' : 'å¤åˆ¶åœ°å€'}</span>\n              {copied && (\n                <svg className=\"w-4 h-4 text-green-500 ml-auto\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                </svg>\n              )}\n            </button>\n\n            {/* åˆ·æ–°ä½™é¢ */}\n            <button\n              onClick={() => {\n                console.log(\"ğŸ”„ æ‰‹åŠ¨åˆ·æ–°ä½™é¢...\");\n                fetchBalance();\n              }}\n              disabled={balanceLoading}\n              className=\"w-full text-left px-3 py-2 text-sm text-gray-900 hover:bg-gray-50 rounded-md flex items-center space-x-3\"\n            >\n              <svg className={`w-4 h-4 text-gray-400 ${balanceLoading ? 'animate-spin' : ''}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n              </svg>\n              <span>{balanceLoading ? 'åˆ·æ–°ä¸­...' : 'åˆ·æ–°ä½™é¢'}</span>\n            </button>\n\n            {/* åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ */}\n            <button\n              onClick={() => {\n                const explorerUrls: Record<number, string> = {\n                  1: 'https://etherscan.io',\n                  11155111: 'https://sepolia.etherscan.io',\n                  137: 'https://polygonscan.com',\n                  56: 'https://bscscan.com',\n                  42161: 'https://arbiscan.io',\n                  10: 'https://optimistic.etherscan.io',\n                };\n                const explorerUrl = chainId ? explorerUrls[chainId] : null;\n                if (explorerUrl) {\n                  window.open(`${explorerUrl}/address/${address}`, '_blank');\n                }\n              }}\n              className=\"w-full text-left px-3 py-2 text-sm text-gray-900 hover:bg-gray-50 rounded-md flex items-center space-x-3\"\n            >\n              <svg className=\"w-4 h-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\n              </svg>\n              <span>åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹</span>\n            </button>\n\n            {/* åˆ‡æ¢ç½‘ç»œ */}\n            {showChainSwitcher && (\n              <>\n                <div className=\"border-t border-gray-100 my-2\"></div>\n                <div className=\"px-3 py-1 text-xs text-gray-500 font-medium\">åˆ‡æ¢ç½‘ç»œ</div>\n\n                <div className=\"max-h-48 overflow-y-auto\">\n                  {supportedChains.map((chain) => (\n                    <button\n                      key={chain.id}\n                      onClick={() => handleSwitchChain(chain.id)}\n                      disabled={switchingChain === chain.id}\n                      className={`\n                        w-full text-left px-3 py-2 text-sm hover:bg-gray-50 rounded-md\n                        flex items-center justify-between transition-colors\n                        ${chainId === chain.id ? 'bg-blue-50 text-blue-600' : 'text-gray-900'}\n                        ${switchingChain === chain.id ? 'opacity-50 cursor-not-allowed' : ''}\n                      `}\n                    >\n                      <div className=\"flex items-center space-x-3\">\n                        <div className={`w-3 h-3 rounded-full ${getChainIcon(chain.id)}`}></div>\n                        <div>\n                          <div className=\"font-medium\">{chain.shortName}</div>\n                          <div className=\"text-xs text-gray-500\">{chain.name}</div>\n                        </div>\n                      </div>\n\n                      <div className=\"flex items-center\">\n                        {switchingChain === chain.id && (\n                          <svg className=\"animate-spin w-4 h-4 text-blue-600 mr-2\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                          </svg>\n                        )}\n\n                        {chainId === chain.id && switchingChain !== chain.id && (\n                          <svg className=\"w-4 h-4 text-blue-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                          </svg>\n                        )}\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              </>\n            )}\n\n            {/* æ–­å¼€è¿æ¥ */}\n            <div className=\"border-t border-gray-100 my-2\"></div>\n            <button\n              onClick={handleDisconnect}\n              className=\"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md flex items-center space-x-3\"\n            >\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n              </svg>\n              <span>æ–­å¼€è¿æ¥</span>\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* ç‚¹å‡»å¤–éƒ¨å…³é—­ä¸‹æ‹‰èœå• */}\n      {isOpen && (\n        <div\n          className=\"fixed inset-0 z-40\"\n          onClick={() => setIsOpen(false)}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default AccountDropdown;","\"use client\";\n\nimport React from 'react';\nimport { useWallet } from './WalletProvider';\nimport AccountDropdown from './AccountDropdown';\n\ninterface EnhancedConnectButtonProps {\n  label?: string;\n  size?: 'sm' | 'md' | 'lg';\n  variant?: 'primary' | 'secondary' | 'outline' | 'ghost';\n  className?: string;\n  showBalance?: boolean;\n  showChainSwitcher?: boolean;\n  onConnect?: (result: { success: boolean; error?: string }) => void;\n  onDisconnect?: () => void;\n}\n\nconst EnhancedConnectButton: React.FC<EnhancedConnectButtonProps> = ({\n  label = 'è¿æ¥é’±åŒ…',\n  size = 'md',\n  variant = 'primary',\n  className = '',\n  showBalance = false,\n  showChainSwitcher = true,\n  onConnect,\n  onDisconnect,\n}) => {\n  const {\n    isConnected,\n    isConnecting,\n    address,\n    error,\n    openModal,\n  } = useWallet();\n\n  // å°ºå¯¸æ ·å¼\n  const sizeClasses = {\n    sm: 'px-3 py-1.5 text-sm',\n    md: 'px-4 py-2 text-base',\n    lg: 'px-6 py-3 text-lg',\n  };\n\n  // å˜ä½“æ ·å¼\n  const variantClasses = {\n    primary: 'bg-blue-600 hover:bg-blue-700 text-white border-transparent',\n    secondary: 'bg-gray-600 hover:bg-gray-700 text-white border-transparent',\n    outline: 'bg-transparent hover:bg-gray-50 text-gray-900 border-gray-300',\n    ghost: 'bg-transparent hover:bg-gray-100 text-gray-700 border-transparent',\n  };\n\n  // åŸºç¡€æ ·å¼\n  const baseClasses = `\n    inline-flex items-center justify-center rounded-lg border font-medium\n    transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\n    disabled:opacity-50 disabled:cursor-not-allowed\n  `;\n\n  const buttonClasses = `${baseClasses} ${sizeClasses[size]} ${variantClasses[variant]} ${className}`;\n\n  // å¤„ç†è¿æ¥\n  const handleConnect = async () => {\n    try {\n      openModal();\n      if (onConnect) {\n        onConnect({ success: true });\n      }\n    } catch (error) {\n      console.error('è¿æ¥å¤±è´¥:', error);\n      if (onConnect) {\n        onConnect({\n          success: false,\n          error: error instanceof Error ? error.message : 'è¿æ¥å¤±è´¥'\n        });\n      }\n    }\n  };\n\n  // å¦‚æœå·²è¿æ¥ï¼Œæ˜¾ç¤ºè´¦æˆ·ä¸‹æ‹‰èœå•\n  if (isConnected && address) {\n    return (\n      <AccountDropdown\n        className={className}\n        showBalance={showBalance}\n        showChainSwitcher={showChainSwitcher}\n        size={size}\n        onDisconnect={onDisconnect}\n      />\n    );\n  }\n\n  // æœªè¿æ¥æ—¶æ˜¾ç¤ºè¿æ¥æŒ‰é’®\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={handleConnect}\n        disabled={isConnecting}\n        className={buttonClasses}\n      >\n        {isConnecting ? (\n          <>\n            <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-current\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n              <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n              <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n            </svg>\n            è¿æ¥ä¸­...\n          </>\n        ) : (\n          label\n        )}\n      </button>\n\n      {error && (\n        <div className=\"absolute top-full left-0 mt-2 p-2 bg-red-50 text-red-600 text-sm rounded-md border border-red-200 whitespace-nowrap\">\n          {error.message}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default EnhancedConnectButton;","// æ ¸å¿ƒç®¡ç†å™¨\nexport { WalletManager } from './core/WalletManager';\n\n// React ç»„ä»¶\nexport { WalletProvider, useWallet } from './components/WalletProvider';\nexport { default as ConnectButton } from './components/ConnectButton';\nexport { default as WalletModal } from './components/WalletModal';\nexport { default as AccountDropdown } from './components/AccountDropdown';\nexport { default as EnhancedConnectButton } from './components/EnhancedConnectButton';\n\n// ç±»å‹å®šä¹‰\nexport type * from './types';\n\n// ç‰ˆæœ¬ä¿¡æ¯\nexport const version = '0.1.0';"],"mappings":"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","names":["import_jsx_runtime","import_jsx_runtime","import_jsx_runtime","announceEvent","import_react","import_jsx_runtime","import_jsx_runtime","detectedWallets","provider","import_jsx_runtime","wallet","address","chainId","import_react","import_jsx_runtime","import_jsx_runtime","error"]}